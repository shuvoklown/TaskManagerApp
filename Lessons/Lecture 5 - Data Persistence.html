<!DOCTYPE html>
<!-- saved from url=(0131)https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style id="stndz-style"></style>
      <title>Lecture 5 - Data Persistence</title>
      
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///C:/Users/btcr/.vscode/extensions/shd101wyy.markdown-preview-enhanced-0.4.2/node_modules/@shd101wyy/mume/dependencies/katex/katex.min.css">
      
      

      
      
      
      
      
      

      <style>
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}

/* highlight */
pre[data-line] {
  position: relative;
  padding: 1em 0 1em 3em;
}
pre[data-line] .line-highlight-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  background-color: transparent;
  display: block;
  width: 100%;
}

pre[data-line] .line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: hsla(24, 20%, 50%,.08);
  background: linear-gradient(to right, hsla(24, 20%, 50%,.1) 70%, hsla(24, 20%, 50%,0));
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}

pre[data-line] .line-highlight:before, 
pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-start);
  position: absolute;
  top: .4em;
  left: .6em;
  min-width: 1em;
  padding: 0 .5em;
  background-color: hsla(24, 20%, 50%,.4);
  color: hsl(24, 20%, 95%);
  font: bold 65%/1.5 sans-serif;
  text-align: center;
  vertical-align: .3em;
  border-radius: 999px;
  text-shadow: none;
  box-shadow: 0 1px white;
}

pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-end);
  top: auto;
  bottom: .4em;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}

      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview  ">
      <h1 class="mume-header" id="lecture-5">Lecture 5</h1>

<ul>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#Lecture-5">Lecture 5</a>
<ul>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#Data-Persistence">Data Persistence</a>
<ul>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#Why-Use-Data-Persistence">Why Use Data Persistence</a></li>
</ul>
</li>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#Flat-Files">Flat Files</a>
<ul>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#CSV---Reader">CSV - Reader</a>
<ul>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#Try-Out">Try Out</a></li>
</ul>
</li>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#CSV---Writer">CSV - Writer</a></li>
</ul>
</li>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#XML---Parser">XML - Parser</a>
<ul>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#XML---Writer">XML - Writer</a></li>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#XML-Security">XML Security</a></li>
</ul>
</li>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#JSON-JavaScript-Object-Notation">JSON (JavaScript Object Notation)</a>
<ul>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#Reading-JSON">Reading JSON</a></li>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#Writing-JSON">Writing JSON</a></li>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#JSON-Caveats">JSON Caveats</a></li>
</ul>
</li>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#Relational-Databases-with-SQLite">Relational Databases with SQLite</a>
<ul>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#SQL-Commands">SQL Commands</a>
<ul>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#CREATE-Table">CREATE Table</a></li>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#INSERT-Data">INSERT Data</a></li>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#UPDATE-Data">UPDATE Data</a></li>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#SELECT-Data">SELECT Data</a></li>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#DELETE-Data">DELETE Data</a></li>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#DROP-Table">DROP Table</a></li>
</ul>
</li>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#Python-SQLite3">Python SQLite3</a>
<ul>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#A-quick-gotcha">A quick gotcha</a></li>
</ul>
</li>
<li><a href="https://bb.uis.edu/bbcswebdav/pid-1398564-dt-content-rid-8553399_1/courses/192CSC47011314/Lecture%205%20-%20Data%20Persistence.html#SQL-Security">SQL Security</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h2 class="mume-header" id="data-persistence">Data Persistence</h2>

<p>This lecture will cover various methods of data persistence.  This is not an exhaustive lecture of how you can store and manipulate data for your program.  These are the common methods that already have a standard library in the Python language.</p>
<h3 class="mume-header" id="why-use-data-persistence">Why Use Data Persistence</h3>

<p>Data persistence is useful for when you need to store information from one run of the program to the next or if the amount of information you need when the program runs is more than what you can store in RAM.  RAM (random access memory) is a voltile data storage.  Volatile means that if the unit loses power, any and all information is lost.  RAM is faster than HDD or SDD storage and is used when applications are ran.  When the application is done running, the OS will clear the program from RAM to make room for other programs.  This means any information you had stored is lost.  Saving your data to a non-volatile storage location will allow you to use that data on another run of the program.</p>
<p>Data persistence can be used for all sorts of reasons including saving configuration information for the program, user information, even data for media files like documents, audio, images, 3D models are all forms of data persistence.  When writing your application, you need to have a standard of what the data means and how to store it.  We are going to take a look at some standard forms of data persistence including</p>
<ul>
<li>Flat Files</li>
<li>CSV</li>
<li>XML</li>
<li>Relational Databases (SQLite)</li>
<li>JSON</li>
</ul>
<p>Each of these have their own standards that we will explore in this lecture.  Also, we will take a look at some possible security issues for those that have them.</p>
<h2 class="mume-header" id="flat-files">Flat Files</h2>

<p>Flat file databases are a general way of encoding a database model.  Flat file databases were common and are still common when the amount of data to store is very minimal.  If the overhead of storing the information is greater than the amount of information then a flat file might be used to reduce space usage.</p>
<p>Flat files usually have one record per line and are organized via rows and columns.  Usually, only a single file is used to store information.  The columns for each record is separated by a delimiter.  This may include whitespace like a tab character or a comma.  A comma separated variable (CSV) file is a common flat file.  Below is an example of a flat file database.</p>
<pre>-- Filename record.txt
Name	Age	Phone#
Brian	27	123-456-7890
Tom	  34	123-654-2322
Lisa	 27	980-133-7000
</pre>
<p>Above, the database contains records of individuals including their name, age, and phone number.  Now, there is no specific module for parsing a flat file so we will need to write our own module to do so.  Knowing how your data is structured is always the first step you should take before writing a parser.  If you know your data is saved in another format such as a CSV, XML, JSON, or relational database then use those modules and methods for data.  Otherwise, we will need to write our own.  Below is a simple way to parse this information.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> phone_number<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>NAME <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>AGE <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>PHONE_NUMBER <span class="token operator">=</span> phone_number
    
    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">"Person({name}, {age}, {phone})"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name <span class="token operator">=</span> self<span class="token punctuation">.</span>NAME<span class="token punctuation">,</span> 
                                                 age  <span class="token operator">=</span> self<span class="token punctuation">.</span>AGE<span class="token punctuation">,</span>
                                                 phone<span class="token operator">=</span> self<span class="token punctuation">.</span>PHONE_NUMBER<span class="token punctuation">)</span>

<span class="token comment"># Used to store the records in the flat file</span>
people <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token comment"># The flat file is just a .txt file.</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"record.txt"</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> records<span class="token punctuation">:</span>
    header <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>records<span class="token punctuation">)</span> <span class="token comment"># column names</span>
    <span class="token keyword">for</span> record <span class="token keyword">in</span> records<span class="token punctuation">:</span>
        <span class="token comment"># Unpacks the contents of the list (name, age, phone#)</span>
        <span class="token comment">#returned by split to </span>
        <span class="token comment"># the constructor, __init__, of the Person class.</span>
        p <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token operator">*</span>record<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        people<span class="token punctuation">.</span>append<span class="token punctuation">(</span>p<span class="token punctuation">)</span>

<span class="token keyword">for</span> person <span class="token keyword">in</span> people<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
</pre><pre class="language-text">Person(Brian, 27, 123-456-7890
)
Person(Tom, 34, 123-654-2322
)
Person(Brady, 27, 980-133-7000)
</pre>
<p>Couple things to note.  Manually parsing the information can result problems later if the method of separating the columns of each record is changed.  Consider instead of tabs they decide to use periods because some of their data contains tabs as part of a single column item (go with me here).  You will need to modify this code and any other code you have that parses the data.  Another are to watch is the data type of the column.  For this instance, name and phone number are interpreterd as strings and age is an int.  If you forget to explicitly state this in your code then this could result in problems later on and debugging becomes a difficult task.</p>
<p>Again, nothing special about flat files other than they are use for small amounts of information that can completely stored in memory.  Flat files may also be a pain so using a more structured and standard approach may be more beneficial.</p>
<p>Another fact about flat files is that they can be binary files.  These are not ASCII documents and require you to parse the data using the binary flag when opening the file.</p>
<h3 class="mume-header" id="csv-reader">CSV - Reader</h3>

<p><a href="https://docs.python.org/3/library/csv.html">Python 3 CSV Module Documentation</a></p>
<p><a href="https://tools.ietf.org/html/rfc4180#section-2">CSV RFC Documentation</a></p>
<p>CSV files are simply comma separated files.  Instead of an arbitrary delimiter separating the columns of a row, it is simply a comma.  For these types of files, because they are so common and they have a standard, we can use the <code>csv</code> module in Python.  As a matter of fact, the <code>csv</code> module is so useful we can use it to parse the information in the above example because we can specify the delimiter.  Another nice feature of the module is it can parse a column in which the delimiter is part of the column data as long as we surround our data with double quotes (which we can change this setting as well).  Let me show a basic example using the information above but in a CSV format.</p>
<pre>-- Filename record.csv
Name,Age,Phone#
Brian,24,123-456-7890
Tom,34,456-789-1234
Brady,28,453-344-3333
</pre>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> csv

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'record.csv'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> records<span class="token punctuation">:</span>
    <span class="token comment"># Creates a csv reader from a file object</span>
    csv_reader <span class="token operator">=</span> csv<span class="token punctuation">.</span>reader<span class="token punctuation">(</span>records<span class="token punctuation">)</span>
    
    <span class="token comment"># If the csv file has headers you'll want to do this</span>
    <span class="token comment"># to skip over it (maybe even use it in your code) </span>
    headers <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>csv_reader<span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Headers: {}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>headers<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> row <span class="token keyword">in</span> csv_reader<span class="token punctuation">:</span>
        name <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        age <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        p_num <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Person({}, {}, {})"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> p_num<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">Headers: ['Name', 'Age', 'Phone#']
Person(Brian, 24, 123-456-7890)
Person(Tom, 34, 456-789-1234)
Person(Brady, 28, 453-344-3333)
</pre>
<p>Notice, I took a different approach than before to show you that csv_reader is an iterator and each row is a list containing the information from each record.</p>
<p>Similar to a flat file, we need to convert the data to its appropriate data type.</p>
<p>Let's take a look at some of the other arguments we can change when we create a csv_reader.  Suppose we have a csv file such as the following</p>
<pre>-- Filename record2.txt
Name,Age,Phone#
Rogers, Brian,24,123-456-7890
Sidener, Tom,34,456-789-1234
Brady, Nick,28,453-344-3333
Newton, Isaac,77,217-867-5309
</pre>
<p>Now we have a record that uses the comma to separate first and last name but it looks like each record has 4 columns instead of the 3 that the headers are indicating.  What happens if we try to parse this like above?</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> csv

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'record2.csv'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> records<span class="token punctuation">:</span>
    csv_reader <span class="token operator">=</span> csv<span class="token punctuation">.</span>reader<span class="token punctuation">(</span>records<span class="token punctuation">)</span>
    
    headers <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>csv_reader<span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Headers: {}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>headers<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> row <span class="token keyword">in</span> csv_reader<span class="token punctuation">:</span>
        name <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        age <span class="token operator">=</span>  <span class="token builtin">int</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        p_num <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Person({}, {}, {})"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> p_num<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">Headers: ['Name', 'Age', 'Phone#']



---------------------------------------------------------------------------

ValueError                                Traceback (most recent call last)

&lt;ipython-input-17-f64cc62a7378&gt; in &lt;module&gt;()
     12     for row in csv_reader:
     13         name = row[0]
---&gt; 14         age =  int(row[1])
     15         p_num = row[2]
     16         print("Person({}, {}, {})".format(name, age, p_num))


ValueError: invalid literal for int() with base 10: ' Brian'
</pre>
<p>Because we expected the second element to be an integer, <code>age</code>, we get a value error because the second element is not an integer.  Suppose we remove the <code>int</code> function call.  Then we would be off by one in our code and we would not have the phone number stored.  There are two ways we can fix this issue.</p>
<p><strong>Option 1</strong> - Write our code to handle this. Instead of just name we can use a first_name and last_name variable.  If we don't have control on how the data is saved to the file this may be your only option.  Here is a solution to option 1.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> csv

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'record2.csv'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> records<span class="token punctuation">:</span>
    csv_reader <span class="token operator">=</span> csv<span class="token punctuation">.</span>reader<span class="token punctuation">(</span>records<span class="token punctuation">)</span>
    
    headers <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>csv_reader<span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Headers: {}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>headers<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> row <span class="token keyword">in</span> csv_reader<span class="token punctuation">:</span>
        last_name <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        first_name <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        age <span class="token operator">=</span>  <span class="token builtin">int</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        p_num <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Person({}, {}, {}, {})"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>first_name<span class="token punctuation">,</span> 
                                              last_name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> p_num<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">Headers: ['Name', 'Age', 'Phone#']
Person( Brian, Rogers, 24, 123-456-7890)
Person( Tom, Bradley, 34, 456-789-1234)
Person( Brady, Nick, 28, 453-344-3333)
Person( Isaac, Newton, 77, 217-867-5309)
</pre>
<p>The problem with this method is not ever record might have all the necessary columns for each record.  Suppose the data is this, instead.</p>
<pre>Name,Age,Phone#
Brian,24,123-456-7890
Tom,34,456-789-1234
Brady,28,453-344-3333
Newton, Isaac,77,217-867-5309
</pre>
<p>The above method will fail because the first 3 rows only have 3 items so when <code>row[3]</code> is called it will produce an IndexError.</p>
<p><strong>Option 2</strong> - If we have control over how the data is saved, then we can use another delimiter to encapsulate information that is part of one column that may contain a comma.  The default are double quotes and so the data will look like the following.</p>
<pre>-- Filename record3.csv
Name,Age,Phone#
"Rogers, Brian",24,123-456-7890
"Bradley, Tom",34,456-789-1234
"Nick, Brady",28,453-344-3333
"Newton, Isaac",77,217-867-5309
</pre>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> csv

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'record3.csv'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> records<span class="token punctuation">:</span>
    csv_reader <span class="token operator">=</span> csv<span class="token punctuation">.</span>reader<span class="token punctuation">(</span>records<span class="token punctuation">)</span>
    
    headers <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>csv_reader<span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Headers: {}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>headers<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> row <span class="token keyword">in</span> csv_reader<span class="token punctuation">:</span>
        name <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        age <span class="token operator">=</span>  <span class="token builtin">int</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        p_num <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Person({}, {}, {})"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> p_num<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">Headers: ['Name', 'Age', 'Phone#']
Person(Rogers, Brian, 24, 123-456-7890)
Person(Bradley, Tom, 34, 456-789-1234)
Person(Nick, Brady, 28, 453-344-3333)
Person(Newton, Isaac, 77, 217-867-5309)
</pre>
<p>This will also handle the problem where only Isaac Newton has the double quotes.  We can of course change this symbol.  Suppose we have the following csv file.</p>
<pre>-- Filename record4.csv

Name,Age,Phone#
|Rogers, Brian "broge2"|,24,123-456-7890
|Bradley, Tom "tbrad3"|,34,456-789-1234
|Nick, Brady "bnick3"|,28,453-344-3333
|Newton, Isaac "inewt1"|,77,217-867-5309
</pre>
<p>In this case, the data is encapsulated in a pipe bar, |, and the quotes are surrounding what looks like a username.  What happens if we use the code above to parse this?</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> csv

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'record4.csv'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> records<span class="token punctuation">:</span>
    csv_reader <span class="token operator">=</span> csv<span class="token punctuation">.</span>reader<span class="token punctuation">(</span>records<span class="token punctuation">)</span>
    
    headers <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>csv_reader<span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Headers: {}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>headers<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> row <span class="token keyword">in</span> csv_reader<span class="token punctuation">:</span>
        name <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        age <span class="token operator">=</span>  <span class="token builtin">int</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        p_num <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Person({}, {}, {})"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> p_num<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">Headers: ['Name', 'Age', 'Phone#']



---------------------------------------------------------------------------

ValueError                                Traceback (most recent call last)

&lt;ipython-input-30-d4b7a7885cc2&gt; in &lt;module&gt;()
     12     for row in csv_reader:
     13         name = row[0]
---&gt; 14         age =  int(row[1])
     15         p_num = row[2]
     16         print("Person({}, {}, {})".format(name, age, p_num))


ValueError: invalid literal for int() with base 10: ' Brian "broge2"|'
</pre>
<p>The interpreter gets confused and we end up with an error for an invalid int.  This is because it sees the first item as <em>|Rogers</em>.  The next item as <em>Brian "broge2"|</em>.  And the third item as <em>27</em>, fourth as the phone number.  We are off by one.  (age will actually contain the Brian "broge2"| in this case).</p>
<p>Let us, instead, set the delimiter for the pipe bar.  We use the named argument, <code>quotechar</code> when creating the reader.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> csv

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'record4.csv'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> records<span class="token punctuation">:</span>
    <span class="token comment"># Creates a csv reader from a file object</span>
    <span class="token comment"># Uses quotechar to set the pipebar</span>
    csv_reader <span class="token operator">=</span> csv<span class="token punctuation">.</span>reader<span class="token punctuation">(</span>records<span class="token punctuation">,</span> quotechar<span class="token operator">=</span><span class="token string">'|'</span><span class="token punctuation">)</span>
    
    headers <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>csv_reader<span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Headers: {}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>headers<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> row <span class="token keyword">in</span> csv_reader<span class="token punctuation">:</span>
        name <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        age <span class="token operator">=</span>  <span class="token builtin">int</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        p_num <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Person({}, {}, {})"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> p_num<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">Headers: ['Name', 'Age', 'Phone#']
Person(Rogers, Brian "broge2", 24, 123-456-7890)
Person(Bradley, Tom "tbrad3", 34, 456-789-1234)
Person(Nick, Brady "bnick3", 28, 453-344-3333)
Person(Newton, Isaac "inewt1", 77, 217-867-5309)
</pre>
<p>What happens if a column is missing from data?  Let us investigate by removing some of the columns from rows.</p>
<pre>-- Filename record5.csv

Name,Age,Phone#
"Rogers, Brian",,123-456-7890
,34,
"Nick, Brady",28,
"Newton, Isaac",77,217-867-5309
</pre>
<p>Notice how some of the columns are missing and we know this because there is a comma but no data after or preceding the comma.  What happens if we read in this file?</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> csv

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'record5.csv'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> records<span class="token punctuation">:</span>
    csv_reader <span class="token operator">=</span> csv<span class="token punctuation">.</span>reader<span class="token punctuation">(</span>records<span class="token punctuation">)</span>
    
    headers <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>csv_reader<span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Headers: {}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>headers<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> row <span class="token keyword">in</span> csv_reader<span class="token punctuation">:</span>
        name <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        age <span class="token operator">=</span>  <span class="token builtin">int</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        p_num <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Person({}, {}, {})"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> p_num<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">Headers: ['Name', 'Age', 'Phone#']



---------------------------------------------------------------------------

ValueError                                Traceback (most recent call last)

&lt;ipython-input-36-af1b8b147823&gt; in &lt;module&gt;()
     12     for row in csv_reader:
     13         name = row[0]
---&gt; 14         age =  int(row[1])
     15         p_num = row[2]
     16         print("Person({}, {}, {})".format(name, age, p_num))


ValueError: invalid literal for int() with base 10: ''
</pre>
<p>We get an error again because we are trying to convert an empty string to an integer.  So we should check for empty data and do something if that occurs.  Let's just store <code>None</code>.  This will be a one line issue.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> csv

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'record5.csv'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> records<span class="token punctuation">:</span>
    csv_reader <span class="token operator">=</span> csv<span class="token punctuation">.</span>reader<span class="token punctuation">(</span>records<span class="token punctuation">)</span>
    
    headers <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>csv_reader<span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Headers: {}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>headers<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> row <span class="token keyword">in</span> csv_reader<span class="token punctuation">:</span>
        row_name<span class="token punctuation">,</span> row_age<span class="token punctuation">,</span> row_p_num <span class="token operator">=</span> row
        name <span class="token operator">=</span> row_name <span class="token keyword">if</span> row_name <span class="token keyword">else</span> <span class="token boolean">None</span>
        age <span class="token operator">=</span>  <span class="token builtin">int</span><span class="token punctuation">(</span>row_age<span class="token punctuation">)</span> <span class="token keyword">if</span> row_age <span class="token keyword">else</span> <span class="token boolean">None</span>
        p_num <span class="token operator">=</span> row_p_num <span class="token keyword">if</span> row_p_num <span class="token keyword">else</span> <span class="token boolean">None</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Person({}, {}, {})"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> p_num<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">Headers: ['Name', 'Age', 'Phone#']
Person(Rogers, Brian, None, 123-456-7890)
Person(None, 34, None)
Person(Nick, Brady, 28, None)
Person(Newton, Isaac, 77, 217-867-5309)
</pre>
<p>This would allow us to write any later code that uses this to have logic to handle the <code>None</code> case.</p>
<p>Somehting else we can change about the csv reader is what is separating each variable.  Let us take the flat file example from above.  Instead of commas, the items are separated by a tab.  We can use the <code>delimiter</code> named argument when creating our reader.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> csv

<span class="token comment"># Notice, we don't need the file to be .csv.  Any ascii file will work.</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'record.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> records<span class="token punctuation">:</span>
    csv_reader <span class="token operator">=</span> csv<span class="token punctuation">.</span>reader<span class="token punctuation">(</span>records<span class="token punctuation">,</span> delimiter<span class="token operator">=</span><span class="token string">'\t'</span><span class="token punctuation">)</span>
    
    headers <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>csv_reader<span class="token punctuation">)</span>
    
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Headers: {}"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>headers<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> row <span class="token keyword">in</span> csv_reader<span class="token punctuation">:</span>
        name <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        age <span class="token operator">=</span>  row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        p_num <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Person({}, {}, {})"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> p_num<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">Headers: ['Name', 'Age', 'Phone#']
Person(Brian, 27, 123-456-7890)
Person(Tom, 34, 123-654-2322)
Person(Brady, 27, 980-133-7000)
</pre>
<p>We used the <code>csv</code> module to parse our flat file.  So you may be able to use this module if you are working with flat file databases.</p>
<p>Visit the documentation for more on the <code>csv</code> module.  Next, we are going to take a look at writing to a csv file.</p>
<h4 class="mume-header" id="try-out">Try Out</h4>

<ol>
<li>
<p>Take the person class from the flat file example and rewrite one of the csv examples to recreate Person objects from the data given.</p>
</li>
<li>
<p>Find out what happens if we have a header in our csv file and we forget to take that into account in our program (remove the next(csv_reader)).</p>
</li>
</ol>
<h3 class="mume-header" id="csv-writer">CSV - Writer</h3>

<p>We can use the CSV module to write out data in the CSV format.  We can use any of the named arguments above to modify the separator, delimiter, quotechar, etc.  Let us look at a basic example.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> csv

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'created_csv.csv'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> csv_file<span class="token punctuation">:</span>
    csv_writer <span class="token operator">=</span> csv<span class="token punctuation">.</span>writer<span class="token punctuation">(</span>csv_file<span class="token punctuation">)</span>
    <span class="token comment"># Headers</span>
    csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'First Name'</span><span class="token punctuation">,</span> <span class="token string">'Last Name'</span><span class="token punctuation">,</span> <span class="token string">'Age'</span><span class="token punctuation">,</span> <span class="token string">'Phone #'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Brian'</span><span class="token punctuation">,</span> <span class="token string">'Rogers'</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token string">'123-456-7890'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'James'</span><span class="token punctuation">,</span> <span class="token string">'Bond'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'007-777-7700'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'P., Richard'</span><span class="token punctuation">,</span> <span class="token string">'Feynman'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'112-358-1321'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</pre><pre>- Created CSV File

First Name,Last Name,Age,Phone #

Brian,Rogers,27,123-456-7890

James,Bond,,007-777-7700

"P., Richard",Feynman,,112-358-1321
</pre>
<p>I only created two records to demonstrate the point.  Notice, however, there are newline gaps.  We will fix this in the next example.  The CSV writer handles columns that contain a comma and columns that don't exist automatically.  Of course, we can change the behaviour of these options just like the CSV reader above.  Now, to fix the extra new lines, we can open the file and set the newline argument or set the lineterminator of the CSV writer object.  Here are both those examples</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> csv

<span class="token comment">#Set the newline to be an empty string</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'created_csv.csv'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> newline<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token keyword">as</span> csv_file<span class="token punctuation">:</span>
    csv_writer <span class="token operator">=</span> csv<span class="token punctuation">.</span>writer<span class="token punctuation">(</span>csv_file<span class="token punctuation">)</span>
    csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'First Name'</span><span class="token punctuation">,</span> <span class="token string">'Last Name'</span><span class="token punctuation">,</span> <span class="token string">'Age'</span><span class="token punctuation">,</span> <span class="token string">'Phone #'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Brian'</span><span class="token punctuation">,</span> <span class="token string">'Rogers'</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token string">'123-456-7890'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'James'</span><span class="token punctuation">,</span> <span class="token string">'Bond'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'007-777-7700'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'P., Richard'</span><span class="token punctuation">,</span> <span class="token string">'Feynman'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'112-358-1321'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</pre><pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> csv

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'created_csv.csv'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> csv_file<span class="token punctuation">:</span>
    <span class="token comment">#Set the csv writer lineterminator to a single \n</span>
    csv_writer <span class="token operator">=</span> csv<span class="token punctuation">.</span>writer<span class="token punctuation">(</span>csv_file<span class="token punctuation">,</span> lineterminator<span class="token operator">=</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
    csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'First Name'</span><span class="token punctuation">,</span> <span class="token string">'Last Name'</span><span class="token punctuation">,</span> <span class="token string">'Age'</span><span class="token punctuation">,</span> <span class="token string">'Phone #'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Brian'</span><span class="token punctuation">,</span> <span class="token string">'Rogers'</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token string">'123-456-7890'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'James'</span><span class="token punctuation">,</span> <span class="token string">'Bond'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'007-777-7700'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    csv_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'P., Richard'</span><span class="token punctuation">,</span> <span class="token string">'Feynman'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'112-358-1321'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</pre><p>That's the CSV module.  Easy to use.  What if our data has relationships with other pieces of data, however?  There are better alternatives than trying to work with CSV files in this regard.</p>
<h2 class="mume-header" id="xml-parser">XML - Parser</h2>

<p><a href="https://docs.python.org/3.6/library/xml.etree.elementtree.html">Python 3 Documentation</a></p>
<p><a href="https://pymotw.com/3/xml.etree.ElementTree/index.html">Python 3 Examples: Python Module of the Week</a></p>
<p><a href="http://www.w3.org/standards/xml/">XML Documentation</a></p>
<p>XML is a format that store data in a hierarchical form.  The data is organized using tags similar to HTML.  However, we define what the tags are whereas in HTML they are defined for us to indicate how data is placed on a page.  XML is not used to place information but is used to store information.</p>
<p>XML tags are created using diamond brackets, &lt;&gt;, and a name between them such as &lt;tag1&gt; or &lt;tag2&gt;. (We can put anything between the brackets as a name for our tag.</p>
<p>There are two types of tags.  An opening tag which starts a record and a closing tag which ends a record.  A closing tag conatins a forward slash after the opening bracket.  So a record will look something like thisl</p>
<pre>- classifications.xml
&lt;classifications&gt;
    &lt;animal&gt;
        &lt;common_name&gt;
            Gray Wolf
        &lt;/common_name&gt;
        &lt;kingdom&gt;
            Animalia
        &lt;/kingdom&gt;
        &lt;phylum&gt;
            Chordata
        &lt;/phylum&gt;
        &lt;class&gt;
            Mammalia
        &lt;/class&gt;
        &lt;order&gt;
            Carnivora
        &lt;/order&gt;
        &lt;family&gt;
            Canidae
        &lt;/family&gt;
        &lt;genus&gt;
            Canis
        &lt;/genus&gt;
        &lt;species&gt;
            lupus
        &lt;/species&gt;
    &lt;/animal&gt;
&lt;/classifications&gt;
</pre>
<p>In this example, there are several tags.  The classification of a gray wolf are related to the gray wolf, and so, reside between the gray_wolf opening and closing tags.  Each of these have their own open and closing tags as well.  We could have subtags inside these subtags if we wanted as well as other records of other animals in this particular XML file.</p>
<p>So how would we parse this information?  There are many modules useful for parsing XML in the <code>xml</code> module.  We will take a look at one such module, etree.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">from</span> xml<span class="token punctuation">.</span>etree <span class="token keyword">import</span> ElementTree

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'classifications.xml'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> xml_file<span class="token punctuation">:</span>
    tree <span class="token operator">=</span> ElementTree<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>xml_file<span class="token punctuation">)</span>
    
    <span class="token keyword">for</span> node <span class="token keyword">in</span> tree<span class="token punctuation">.</span><span class="token builtin">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>node<span class="token punctuation">.</span>tag<span class="token punctuation">}</span></span><span class="token string"> - </span><span class="token interpolation"><span class="token punctuation">{</span>node<span class="token punctuation">.</span>text<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
</pre><pre class="language-text">classifications - 
animal - 
common_name - Gray Wolf
kingdom - Animalia
phylum - Chordata
class - Mammalia
order - Carnivora
family - Canidae
genus - Canis
species - lupus
</pre>
<p>The reason we use the .strip() when retrieving the text of each node (which, a node is each individual tag) has to do with the fact that if we copy and paste the above XML information into a file then all the tabs before the actual text count since the parser doesn't make any exceptions.  If we were to store the raw XML appropriately then it would look like the following.</p>
<pre>&lt;classifications&gt;&lt;animal&gt;&lt;common_name&gt;Gray Wolf&lt;/common_name&gt;&lt;kingdom&gt;Animalia&lt;/kingdom&gt;&lt;phylum&gt;Chordata&lt;/phylum&gt;&lt;class&gt;Mammalia&lt;/class&gt;&lt;order&gt;Carnivora&lt;/order&gt;&lt;family&gt;Canidae&lt;/family&gt;&lt;genus&gt;Canis&lt;/genus&gt;&lt;species&gt;lupus&lt;/species&gt;&lt;/animal&gt;&lt;/classifications&gt;
</pre>
<p>This is, of course, difficult for us but for a computer it makes no difference.  If the file looked like this instead, then you don't need to strip the data.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">from</span> xml<span class="token punctuation">.</span>etree <span class="token keyword">import</span> ElementTree

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'classifications2.xml'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> xml_file<span class="token punctuation">:</span>
    tree <span class="token operator">=</span> ElementTree<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>xml_file<span class="token punctuation">)</span>
    
    <span class="token keyword">for</span> node <span class="token keyword">in</span> tree<span class="token punctuation">.</span><span class="token builtin">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>node<span class="token punctuation">.</span>tag<span class="token punctuation">}</span></span><span class="token string"> - </span><span class="token interpolation"><span class="token punctuation">{</span>node<span class="token punctuation">.</span>text<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
</pre><pre class="language-text">classifications - None
animal - None
common_name - Gray Wolf
kingdom - Animalia
phylum - Chordata
class - Mammalia
order - Carnivora
family - Canidae
genus - Canis
species - lupus
</pre>
<p>In addition, we have the correct situation in which classifications and animal do not have text.  In the preceding example, the text they had contained nothing but tabs.</p>
<p>Let us take a look at another example with some different information.  Here is a DB of books.</p>
<pre>- Book Catalog

&lt;catalog&gt;
   &lt;book id="bk101"&gt;
      &lt;author&gt;Gambardella, Matthew&lt;/author&gt;
      &lt;title&gt;XML Developer's Guide&lt;/title&gt;
      &lt;genre&gt;Computer&lt;/genre&gt;
      &lt;price&gt;44.95&lt;/price&gt;
      &lt;publish_date&gt;2000-10-01&lt;/publish_date&gt;
      &lt;description&gt;An in-depth look at creating applications 
      with XML.&lt;/description&gt;
   &lt;/book&gt;
   &lt;book id="bk102"&gt;
        &lt;author id="1"&gt;Erich Gamma&lt;/author&gt;
        &lt;author id="2"&gt;Richard Helm&lt;/author&gt;
        &lt;author id="3"&gt;Ralph Johnson&lt;/author&gt;
        &lt;author id="4"&gt;John Vlissides&lt;/author&gt;
        &lt;title&gt;Design Patterns: Elements of Reusable Object-Oriented Software&lt;/title&gt;
        &lt;genre&gt;Software Engineering&lt;/genre&gt;
        &lt;price&gt;34.99&lt;/price&gt;
        &lt;publish_date&gt;1994-11-10&lt;/publish_date&gt;
        &lt;description&gt;Covers the design of object-oriented software and examines how to investigate requirements, create solutions, and translate to code.
        &lt;/description&gt;
    &lt;/book&gt;
   &lt;book id="bk103"&gt;
      &lt;author&gt;Ralls, Kim&lt;/author&gt;
      &lt;title&gt;Midnight Rain&lt;/title&gt;
      &lt;genre&gt;Fantasy&lt;/genre&gt;
      &lt;price&gt;5.95&lt;/price&gt;
      &lt;publish_date&gt;2000-12-16&lt;/publish_date&gt;
      &lt;description&gt;A former architect battles corporate zombies, 
      an evil sorceress, and her own childhood to become queen 
      of the world.&lt;/description&gt;
   &lt;/book&gt;
   &lt;book id="bk104"&gt;
      &lt;author&gt;Corets, Eva&lt;/author&gt;
      &lt;title&gt;Maeve Ascendant&lt;/title&gt;
      &lt;genre&gt;Fantasy&lt;/genre&gt;
      &lt;price&gt;5.95&lt;/price&gt;
      &lt;publish_date&gt;2000-11-17&lt;/publish_date&gt;
      &lt;description&gt;After the collapse of a nanotechnology 
      society in England, the young survivors lay the 
      foundation for a new society.&lt;/description&gt;
   &lt;/book&gt;
   &lt;book id="bk105"&gt;
      &lt;author&gt;Corets, Eva&lt;/author&gt;
      &lt;title&gt;Oberon's Legacy&lt;/title&gt;
      &lt;genre&gt;Fantasy&lt;/genre&gt;
      &lt;price&gt;5.95&lt;/price&gt;
      &lt;publish_date&gt;2001-03-10&lt;/publish_date&gt;
      &lt;description&gt;In post-apocalypse England, the mysterious 
      agent known only as Oberon helps to create a new life 
      for the inhabitants of London. Sequel to Maeve 
      Ascendant.&lt;/description&gt;
   &lt;/book&gt;
   &lt;book id="bk106"&gt;
      &lt;author&gt;Corets, Eva&lt;/author&gt;
      &lt;title&gt;The Sundered Grail&lt;/title&gt;
      &lt;genre&gt;Fantasy&lt;/genre&gt;
      &lt;price&gt;5.95&lt;/price&gt;
      &lt;publish_date&gt;2001-09-10&lt;/publish_date&gt;
      &lt;description&gt;The two daughters of Maeve, half-sisters, 
      battle one another for control of England. Sequel to 
      Oberon's Legacy.&lt;/description&gt;
   &lt;/book&gt;
   &lt;book id="bk107"&gt;
      &lt;author&gt;Randall, Cynthia&lt;/author&gt;
      &lt;title&gt;Lover Birds&lt;/title&gt;
      &lt;genre&gt;Romance&lt;/genre&gt;
      &lt;price&gt;4.95&lt;/price&gt;
      &lt;publish_date&gt;2000-09-02&lt;/publish_date&gt;
      &lt;description&gt;When Carla meets Paul at an ornithology 
      conference, tempers fly as feathers get ruffled.&lt;/description&gt;
   &lt;/book&gt;
   &lt;book id="bk108"&gt;
      &lt;author&gt;Thurman, Paula&lt;/author&gt;
      &lt;title&gt;Splish Splash&lt;/title&gt;
      &lt;genre&gt;Romance&lt;/genre&gt;
      &lt;price&gt;4.95&lt;/price&gt;
      &lt;publish_date&gt;2000-11-02&lt;/publish_date&gt;
      &lt;description&gt;A deep sea diver finds true love twenty 
      thousand leagues beneath the sea.&lt;/description&gt;
   &lt;/book&gt;
   &lt;book id="bk109"&gt;
      &lt;author&gt;Knorr, Stefan&lt;/author&gt;
      &lt;title&gt;Creepy Crawlies&lt;/title&gt;
      &lt;genre&gt;Horror&lt;/genre&gt;
      &lt;price&gt;4.95&lt;/price&gt;
      &lt;publish_date&gt;2000-12-06&lt;/publish_date&gt;
      &lt;description&gt;An anthology of horror stories about roaches,
      centipedes, scorpions  and other insects.&lt;/description&gt;
   &lt;/book&gt;
   &lt;book id="bk110"&gt;
      &lt;author&gt;Kress, Peter&lt;/author&gt;
      &lt;title&gt;Paradox Lost&lt;/title&gt;
      &lt;genre&gt;Science Fiction&lt;/genre&gt;
      &lt;price&gt;6.95&lt;/price&gt;
      &lt;publish_date&gt;2000-11-02&lt;/publish_date&gt;
      &lt;description&gt;After an inadvertant trip through a Heisenberg
      Uncertainty Device, James Salway discovers the problems 
      of being quantum.&lt;/description&gt;
   &lt;/book&gt;
   &lt;book id="bk111"&gt;
      &lt;author&gt;O'Brien, Tim&lt;/author&gt;
      &lt;title&gt;Microsoft .NET: The Programming Bible&lt;/title&gt;
      &lt;genre&gt;Computer&lt;/genre&gt;
      &lt;price&gt;36.95&lt;/price&gt;
      &lt;publish_date&gt;2000-12-09&lt;/publish_date&gt;
      &lt;description&gt;Microsoft's .NET initiative is explored in 
      detail in this deep programmer's reference.&lt;/description&gt;
   &lt;/book&gt;
   &lt;book id="bk112"&gt;
      &lt;author&gt;O'Brien, Tim&lt;/author&gt;
      &lt;title&gt;MSXML3: A Comprehensive Guide&lt;/title&gt;
      &lt;genre&gt;Computer&lt;/genre&gt;
      &lt;price&gt;36.95&lt;/price&gt;
      &lt;publish_date&gt;2000-12-01&lt;/publish_date&gt;
      &lt;description&gt;The Microsoft MSXML3 parser is covered in 
      detail, with attention to XML DOM interfaces, XSLT processing, 
      SAX and more.&lt;/description&gt;
   &lt;/book&gt;
   &lt;book id="bk113"&gt;
      &lt;author&gt;Galos, Mike&lt;/author&gt;
      &lt;title&gt;Visual Studio 7: A Comprehensive Guide&lt;/title&gt;
      &lt;genre&gt;Computer&lt;/genre&gt;
      &lt;price&gt;49.95&lt;/price&gt;
      &lt;publish_date&gt;2001-04-16&lt;/publish_date&gt;
      &lt;description&gt;Microsoft Visual Studio 7 is explored in depth,
      looking at how Visual Basic, Visual C++, C#, and ASP+ are 
      integrated into a comprehensive development 
      environment.&lt;/description&gt;
   &lt;/book&gt;
&lt;/catalog&gt;
</pre>
<p>There is something new you might notice.  What is that <strong>id</strong> with the tags?  This is called an attribute or property and we can add whatever kind of attribute we would like.  In this case, <strong>id</strong> is used as a book identifier.  We can grab that information as well.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">from</span> xml<span class="token punctuation">.</span>etree <span class="token keyword">import</span> ElementTree

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'book_catalog.xml'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> xml_file<span class="token punctuation">:</span>
    tree <span class="token operator">=</span> ElementTree<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>xml_file<span class="token punctuation">)</span>
    
    <span class="token keyword">for</span> node <span class="token keyword">in</span> tree<span class="token punctuation">.</span><span class="token builtin">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>node<span class="token punctuation">.</span>tag<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> node<span class="token punctuation">.</span>text<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f' - </span><span class="token interpolation"><span class="token punctuation">{</span>node<span class="token punctuation">.</span>text<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> node<span class="token punctuation">.</span>attrib<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f' - </span><span class="token interpolation"><span class="token punctuation">{</span>node<span class="token punctuation">.</span>attrib<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'-'</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span>
</pre><pre class="language-text">catalog
----------------------------------------------------------------------------------------------------
book - {'id': 'bk101'}
----------------------------------------------------------------------------------------------------
author - Gambardella, Matthew
----------------------------------------------------------------------------------------------------
title - XML Developer's Guide
----------------------------------------------------------------------------------------------------
genre - Computer
----------------------------------------------------------------------------------------------------
price - 44.95
----------------------------------------------------------------------------------------------------
publish_date - 2000-10-01
----------------------------------------------------------------------------------------------------
description - An in-depth look at creating applications with XML.
----------------------------------------------------------------------------------------------------
book - {'id': 'bk102'}
----------------------------------------------------------------------------------------------------
author - Erich Gamma - {'id': '1'}
----------------------------------------------------------------------------------------------------
author - Richard Helm - {'id': '2'}
----------------------------------------------------------------------------------------------------
author - Ralph Johnson - {'id': '3'}
----------------------------------------------------------------------------------------------------
author - John Vlissides - {'id': '4'}
----------------------------------------------------------------------------------------------------
title - Design Patterns: Elements of Reusable Object-Oriented Software
----------------------------------------------------------------------------------------------------
genre - Software Engineering
----------------------------------------------------------------------------------------------------
price - 34.99
----------------------------------------------------------------------------------------------------
publish_date - 1994-11-10
----------------------------------------------------------------------------------------------------
description - Covers the design of object-oriented software and examines how to investigate requirements, create solutions, and translate to code.
----------------------------------------------------------------------------------------------------
book - {'id': 'bk103'}
----------------------------------------------------------------------------------------------------
author - Ralls, Kim
----------------------------------------------------------------------------------------------------
title - Midnight Rain
----------------------------------------------------------------------------------------------------
genre - Fantasy
----------------------------------------------------------------------------------------------------
price - 5.95
----------------------------------------------------------------------------------------------------
publish_date - 2000-12-16
----------------------------------------------------------------------------------------------------
description - A former architect battles corporate zombies, an evil sorceress, and her own childhood to become queen of the world.
----------------------------------------------------------------------------------------------------
book - {'id': 'bk104'}
----------------------------------------------------------------------------------------------------
author - Corets, Eva
----------------------------------------------------------------------------------------------------
title - Maeve Ascendant
----------------------------------------------------------------------------------------------------
genre - Fantasy
----------------------------------------------------------------------------------------------------
price - 5.95
----------------------------------------------------------------------------------------------------
publish_date - 2000-11-17
----------------------------------------------------------------------------------------------------
description - After the collapse of a nanotechnology society in England, the young survivors lay the foundation for a new society.
----------------------------------------------------------------------------------------------------
book - {'id': 'bk105'}
----------------------------------------------------------------------------------------------------
author - Corets, Eva
----------------------------------------------------------------------------------------------------
title - Oberon's Legacy
----------------------------------------------------------------------------------------------------
genre - Fantasy
----------------------------------------------------------------------------------------------------
price - 5.95
----------------------------------------------------------------------------------------------------
publish_date - 2001-03-10
----------------------------------------------------------------------------------------------------
description - In post-apocalypse England, the mysterious agent known only as Oberon helps to create a new life for the inhabitants of London. Sequel to Maeve Ascendant.
----------------------------------------------------------------------------------------------------
book - {'id': 'bk106'}
----------------------------------------------------------------------------------------------------
author - Corets, Eva
----------------------------------------------------------------------------------------------------
title - The Sundered Grail
----------------------------------------------------------------------------------------------------
genre - Fantasy
----------------------------------------------------------------------------------------------------
price - 5.95
----------------------------------------------------------------------------------------------------
publish_date - 2001-09-10
----------------------------------------------------------------------------------------------------
description - The two daughters of Maeve, half-sisters, 
      battle one another for control of England. Sequel to 
      Oberon's Legacy.
----------------------------------------------------------------------------------------------------
book - {'id': 'bk107'}
----------------------------------------------------------------------------------------------------
author - Randall, Cynthia
----------------------------------------------------------------------------------------------------
title - Lover Birds
----------------------------------------------------------------------------------------------------
genre - Romance
----------------------------------------------------------------------------------------------------
price - 4.95
----------------------------------------------------------------------------------------------------
publish_date - 2000-09-02
----------------------------------------------------------------------------------------------------
description - When Carla meets Paul at an ornithology 
      conference, tempers fly as feathers get ruffled.
----------------------------------------------------------------------------------------------------
book - {'id': 'bk108'}
----------------------------------------------------------------------------------------------------
author - Thurman, Paula
----------------------------------------------------------------------------------------------------
title - Splish Splash
----------------------------------------------------------------------------------------------------
genre - Romance
----------------------------------------------------------------------------------------------------
price - 4.95
----------------------------------------------------------------------------------------------------
publish_date - 2000-11-02
----------------------------------------------------------------------------------------------------
description - A deep sea diver finds true love twenty 
      thousand leagues beneath the sea.
----------------------------------------------------------------------------------------------------
book - {'id': 'bk109'}
----------------------------------------------------------------------------------------------------
author - Knorr, Stefan
----------------------------------------------------------------------------------------------------
title - Creepy Crawlies
----------------------------------------------------------------------------------------------------
genre - Horror
----------------------------------------------------------------------------------------------------
price - 4.95
----------------------------------------------------------------------------------------------------
publish_date - 2000-12-06
----------------------------------------------------------------------------------------------------
description - An anthology of horror stories about roaches,
      centipedes, scorpions  and other insects.
----------------------------------------------------------------------------------------------------
book - {'id': 'bk110'}
----------------------------------------------------------------------------------------------------
author - Kress, Peter
----------------------------------------------------------------------------------------------------
title - Paradox Lost
----------------------------------------------------------------------------------------------------
genre - Science Fiction
----------------------------------------------------------------------------------------------------
price - 6.95
----------------------------------------------------------------------------------------------------
publish_date - 2000-11-02
----------------------------------------------------------------------------------------------------
description - After an inadvertant trip through a Heisenberg
      Uncertainty Device, James Salway discovers the problems 
      of being quantum.
----------------------------------------------------------------------------------------------------
book - {'id': 'bk111'}
----------------------------------------------------------------------------------------------------
author - O'Brien, Tim
----------------------------------------------------------------------------------------------------
title - Microsoft .NET: The Programming Bible
----------------------------------------------------------------------------------------------------
genre - Computer
----------------------------------------------------------------------------------------------------
price - 36.95
----------------------------------------------------------------------------------------------------
publish_date - 2000-12-09
----------------------------------------------------------------------------------------------------
description - Microsoft's .NET initiative is explored in 
      detail in this deep programmer's reference.
----------------------------------------------------------------------------------------------------
book - {'id': 'bk112'}
----------------------------------------------------------------------------------------------------
author - O'Brien, Tim
----------------------------------------------------------------------------------------------------
title - MSXML3: A Comprehensive Guide
----------------------------------------------------------------------------------------------------
genre - Computer
----------------------------------------------------------------------------------------------------
price - 36.95
----------------------------------------------------------------------------------------------------
publish_date - 2000-12-01
----------------------------------------------------------------------------------------------------
description - The Microsoft MSXML3 parser is covered in 
      detail, with attention to XML DOM interfaces, XSLT processing, 
      SAX and more.
----------------------------------------------------------------------------------------------------
book - {'id': 'bk113'}
----------------------------------------------------------------------------------------------------
author - Galos, Mike
----------------------------------------------------------------------------------------------------
title - Visual Studio 7: A Comprehensive Guide
----------------------------------------------------------------------------------------------------
genre - Computer
----------------------------------------------------------------------------------------------------
price - 49.95
----------------------------------------------------------------------------------------------------
publish_date - 2001-04-16
----------------------------------------------------------------------------------------------------
description - Microsoft Visual Studio 7 is explored in depth,
      looking at how Visual Basic, Visual C++, C#, and ASP+ are 
      integrated into a comprehensive development 
      environment.
----------------------------------------------------------------------------------------------------
</pre>
<p>Notice, <code>attrib</code> is an instance variable, just like <code>text</code> and <code>tag</code> that contains a dictionary of the attributes of a given tag.</p>
<p>We can use some other ways to traverse the tree rather than just navigating the whole thing.  We can use the methods <code>find</code> and <code>findall</code> to locate tags.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">from</span> xml<span class="token punctuation">.</span>etree <span class="token keyword">import</span> ElementTree

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'book_catalog.xml'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> xml_file<span class="token punctuation">:</span>
    tree <span class="token operator">=</span> ElementTree<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>xml_file<span class="token punctuation">)</span>
    
    <span class="token keyword">for</span> node <span class="token keyword">in</span> tree<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'.//book'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        _id <span class="token operator">=</span> node<span class="token punctuation">.</span>attrib<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span>
        author <span class="token operator">=</span> node<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'.//author'</span><span class="token punctuation">)</span>
        title <span class="token operator">=</span> node<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'.//title'</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>_id<span class="token punctuation">}</span></span><span class="token string"> - </span><span class="token interpolation"><span class="token punctuation">{</span>author<span class="token punctuation">.</span>text<span class="token punctuation">}</span></span><span class="token string"> - </span><span class="token interpolation"><span class="token punctuation">{</span>title<span class="token punctuation">.</span>text<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
        
</pre><pre class="language-text">bk101 - Gambardella, Matthew - XML Developer's Guide
bk102 - Erich Gamma - Design Patterns: Elements of Reusable Object-Oriented Software
bk103 - Ralls, Kim - Midnight Rain
bk104 - Corets, Eva - Maeve Ascendant
bk105 - Corets, Eva - Oberon's Legacy
bk106 - Corets, Eva - The Sundered Grail
bk107 - Randall, Cynthia - Lover Birds
bk108 - Thurman, Paula - Splish Splash
bk109 - Knorr, Stefan - Creepy Crawlies
bk110 - Kress, Peter - Paradox Lost
bk111 - O'Brien, Tim - Microsoft .NET: The Programming Bible
bk112 - O'Brien, Tim - MSXML3: A Comprehensive Guide
bk113 - Galos, Mike - Visual Studio 7: A Comprehensive Guide
</pre>
<p><code>findall</code> finds elements which are direct children of the current element and <code>find</code> will find the <em>first</em> child with a particular tag.  For instance, bk102 has 4 authors but <code>find</code> only gave the first author.  We could change the code to findall to retrieve all authors under bk10.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">from</span> xml<span class="token punctuation">.</span>etree <span class="token keyword">import</span> ElementTree

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'book_catalog.xml'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> xml_file<span class="token punctuation">:</span>
    tree <span class="token operator">=</span> ElementTree<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>xml_file<span class="token punctuation">)</span>
    
    <span class="token keyword">for</span> node <span class="token keyword">in</span> tree<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'.//book'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        _id <span class="token operator">=</span> node<span class="token punctuation">.</span>attrib<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span>
        authors <span class="token operator">=</span> node<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'.//author'</span><span class="token punctuation">)</span>
        title <span class="token operator">=</span> node<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'.//title'</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{</span>_id<span class="token punctuation">}</span></span><span class="token string"> - </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token string">"; "</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>author<span class="token punctuation">.</span>text <span class="token keyword">for</span> author <span class="token keyword">in</span> authors<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string"> - </span><span class="token interpolation"><span class="token punctuation">{</span>title<span class="token punctuation">.</span>text<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
</pre><pre class="language-text">bk101 - Gambardella, Matthew - XML Developer's Guide
bk102 - Erich Gamma; Richard Helm; Ralph Johnson; John Vlissides - Design Patterns: Elements of Reusable Object-Oriented Software
bk103 - Ralls, Kim - Midnight Rain
bk104 - Corets, Eva - Maeve Ascendant
bk105 - Corets, Eva - Oberon's Legacy
bk106 - Corets, Eva - The Sundered Grail
bk107 - Randall, Cynthia - Lover Birds
bk108 - Thurman, Paula - Splish Splash
bk109 - Knorr, Stefan - Creepy Crawlies
bk110 - Kress, Peter - Paradox Lost
bk111 - O'Brien, Tim - Microsoft .NET: The Programming Bible
bk112 - O'Brien, Tim - MSXML3: A Comprehensive Guide
bk113 - Galos, Mike - Visual Studio 7: A Comprehensive Guide
</pre>
<p>To help you parse the line that prints the authors, here is that very syntax pulled from the code.</p>
<p><code>", ".join([author.text for author in authors])</code></p>
<p>This is using list comprehension to create a list of text value of each author in <code>authors</code> (since this will be an element of the parse tree).  This list, containing strings now, will join the names into a string in which the authors are separated by a semicolon and a space.</p>
<p>These are the basics of navigating an XML tree.  Let's move on to creating an XML document from inside our code.</p>
<h3 class="mume-header" id="xml-writer">XML - Writer</h3>

<p>Now that you know how to parse XML files with the xml.etree library, let's look at writing to an XML document.  If you keep in mind that XML is a hierarchy and is represented internally as a tree the creating the XML structure will make sense. Let's look at an example.</p>
<img src="data:image/png;base64,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">
<p>This is a tree that represents courses of different departments.  We will try to mock this tree in an XML document and even include some additional information such as title.  First, where do we start?  We need to identify the root element (element under which all data falls under.)  You can only have 1 root element for any given XML document.  So, we know right away then that our root element is the root of the tree.  The root element is "Courses".  The next elements under this are subelements which can have their own subelements.  Believe it or not, we have everything we need to start writing to XML documents.  We will use <code>Element</code> and <code>SubElement</code> in the <code>ElementTree</code> library.  Let's first create our root element.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> xml<span class="token punctuation">.</span>etree<span class="token punctuation">.</span>ElementTree <span class="token keyword">as</span> ET

root_courses <span class="token operator">=</span> ET<span class="token punctuation">.</span>Element<span class="token punctuation">(</span><span class="token string">"courses"</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>root_courses<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>root_courses<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ET<span class="token punctuation">.</span>tostring<span class="token punctuation">(</span>root_courses<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">&lt;Element 'courses' at 0x013A1F90&gt;
&lt;class 'xml.etree.ElementTree.Element'&gt;
b'&lt;courses /&gt;'
</pre>
<p>The <code>b</code> before the string means bytes.  Just in case you were wondering.  That's unimportant right, however.  What is important is we have our root element, <code>&lt;courses /&gt;</code> using Element from the ElementTree library.  This takes a string and returns a class of type Element.  Okay, that was easy.  Let's add the next two elements "Computer Science" and "Mathematical Science".  We will use SubElement which is similar to Element but requires a parent element as the first argument.  Our parent element is our root element.</p>
<pre data-role="codeBlock" data-info="python" class="language-python">computer_science <span class="token operator">=</span> ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>root_courses<span class="token punctuation">,</span> <span class="token string">"csc"</span><span class="token punctuation">)</span>
mathematical_science <span class="token operator">=</span> ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>root_courses<span class="token punctuation">,</span> <span class="token string">"mat"</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>computer_science<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>computer_science<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ET<span class="token punctuation">.</span>tostring<span class="token punctuation">(</span>computer_science<span class="token punctuation">)</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">'\n\n'</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>mathematical_science<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>mathematical_science<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ET<span class="token punctuation">.</span>tostring<span class="token punctuation">(</span>mathematical_science<span class="token punctuation">)</span><span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">'\n\n'</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>ET<span class="token punctuation">.</span>tostring<span class="token punctuation">(</span>root_courses<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">&lt;Element 'csc' at 0x013A1120&gt;
&lt;class 'xml.etree.ElementTree.Element'&gt;
b'&lt;csc /&gt;'

&lt;Element 'mat' at 0x013A17B0&gt;
&lt;class 'xml.etree.ElementTree.Element'&gt;
b'&lt;mat /&gt;'

b'&lt;courses&gt;&lt;csc /&gt;&lt;mat /&gt;&lt;/courses&gt;'
</pre>
<p>Now we're XML'ing!.  We have an XML tree in which our root is "courses" and our subelements are "csc" and "mat".  Creating the SubElement objects I needed to pass in a root element.  We can also pass in other SubElement objects, which we will do for the courses under Computer Science and Mathematical Science.  We can add XML comments as well.  Let's do that to indicate what csc and mat stand for.</p>
<pre data-role="codeBlock" data-info="python" class="language-python">computer_science<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ET<span class="token punctuation">.</span>Comment<span class="token punctuation">(</span><span class="token string">"Computer Science"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
mathematical_science<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ET<span class="token punctuation">.</span>Comment<span class="token punctuation">(</span><span class="token string">"Mathematical Science"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>ET<span class="token punctuation">.</span>tostring<span class="token punctuation">(</span>root_courses<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">b'&lt;courses&gt;&lt;csc&gt;&lt;!--Computer Science--&gt;&lt;/csc&gt;&lt;mat&gt;&lt;!--Mathematical Science--&gt;&lt;/mat&gt;&lt;/courses&gt;'
</pre>
<p>That was an XML comment.  We can also add inner text and attributes to the nodes.  We will do that for the next sub elements.  I will make sure to comment where I am doing which.</p>
<p>To speed things up, I am going to make a list of tuples for the CSC courses and the MAT courses and loop through the list.  This is to just give a quick example.  You may, instead, want to opt to create a Course class with instance variables that represent the different pieces of information.</p>
<pre data-role="codeBlock" data-info="python" class="language-python">csc_courses <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">(</span><span class="token number">225</span><span class="token punctuation">,</span> <span class="token string">'Computer Programming Concepts I'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token punctuation">(</span><span class="token number">275</span><span class="token punctuation">,</span> <span class="token string">'Computer Programming Concepts II'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">225</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token punctuation">(</span><span class="token number">385</span><span class="token punctuation">,</span> <span class="token string">'Data Structures and Algorithms'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">275</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>

mat_courses <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">(</span><span class="token number">103</span><span class="token punctuation">,</span> <span class="token string">'Trigonometry'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">102</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">115</span><span class="token punctuation">,</span> <span class="token string">'Calculus I'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">103</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token number">116</span><span class="token punctuation">,</span> <span class="token string">'Calculus II'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

departments_info <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">(</span>computer_science<span class="token punctuation">,</span> csc_courses<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>mathematical_science<span class="token punctuation">,</span> mat_courses<span class="token punctuation">)</span>
<span class="token punctuation">]</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>department<span class="token punctuation">,</span> courses<span class="token punctuation">)</span> <span class="token keyword">in</span> departments_info<span class="token punctuation">:</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>course_sec<span class="token punctuation">,</span> title<span class="token punctuation">,</span> cred_hrs<span class="token punctuation">,</span> prereq<span class="token punctuation">)</span> <span class="token keyword">in</span> courses<span class="token punctuation">:</span>
        course <span class="token operator">=</span> ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>department<span class="token punctuation">,</span> <span class="token string">'course'</span><span class="token punctuation">)</span>
        course<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">'sec'</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>course_sec<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># The .set method allows you to set an attribute like &lt;tag attribute=something&gt;</span>
        ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>course<span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text <span class="token operator">=</span> title <span class="token comment"># The .text method adds inner text like &lt;title&gt;inner text&lt;/title&gt;</span>
        ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>course<span class="token punctuation">,</span> <span class="token string">'credit_hrs'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>cred_hrs<span class="token punctuation">)</span>
        ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>course<span class="token punctuation">,</span> <span class="token string">'prereq'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>prereq<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>ET<span class="token punctuation">.</span>tostring<span class="token punctuation">(</span>root_courses<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">b'&lt;courses&gt;&lt;csc&gt;&lt;!--Computer Science--&gt;&lt;course sec="225"&gt;&lt;title&gt;Computer Programming Concepts I&lt;/title&gt;&lt;credit_hrs&gt;3&lt;/credit_hrs&gt;&lt;prereq&gt;None&lt;/prereq&gt;&lt;/course&gt;&lt;course sec="275"&gt;&lt;title&gt;Computer Programming Concepts II&lt;/title&gt;&lt;credit_hrs&gt;3&lt;/credit_hrs&gt;&lt;prereq&gt;225&lt;/prereq&gt;&lt;/course&gt;&lt;course sec="385"&gt;&lt;title&gt;Data Structures and Algorithms&lt;/title&gt;&lt;credit_hrs&gt;4&lt;/credit_hrs&gt;&lt;prereq&gt;275&lt;/prereq&gt;&lt;/course&gt;&lt;/csc&gt;&lt;mat&gt;&lt;!--Mathematical Science--&gt;&lt;course sec="103"&gt;&lt;title&gt;Trigonometry&lt;/title&gt;&lt;credit_hrs&gt;2&lt;/credit_hrs&gt;&lt;prereq&gt;102&lt;/prereq&gt;&lt;/course&gt;&lt;course sec="115"&gt;&lt;title&gt;Calculus I&lt;/title&gt;&lt;credit_hrs&gt;4&lt;/credit_hrs&gt;&lt;prereq&gt;103&lt;/prereq&gt;&lt;/course&gt;&lt;course sec="116"&gt;&lt;title&gt;Calculus II&lt;/title&gt;&lt;credit_hrs&gt;4&lt;/credit_hrs&gt;&lt;prereq&gt;115&lt;/prereq&gt;&lt;/course&gt;&lt;/mat&gt;&lt;/courses&gt;'
</pre>
<p>That looks gross!  To a computer, it doesn't matter what the data looks like but if you took this to your boss you would be lucky if they didn't get an aneurism.  Let's try to clean this up a bit.  I'm using the code from <a href="https://pymotw.com/3/xml.etree.ElementTree/create.html#pretty-printing-xml">Python Module of the Week</a> to create a method to prettify the output.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">from</span> xml<span class="token punctuation">.</span>dom <span class="token keyword">import</span> minidom

<span class="token comment">#Python Module of the Week</span>
<span class="token keyword">def</span> <span class="token function">prettify</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Return a pretty-printed XML string for the Element.
    """</span>
    rough_string <span class="token operator">=</span> ET<span class="token punctuation">.</span>tostring<span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span>
    reparsed <span class="token operator">=</span> minidom<span class="token punctuation">.</span>parseString<span class="token punctuation">(</span>rough_string<span class="token punctuation">)</span>
    <span class="token keyword">return</span> reparsed<span class="token punctuation">.</span>toprettyxml<span class="token punctuation">(</span>indent<span class="token operator">=</span><span class="token string">"  "</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>prettify<span class="token punctuation">(</span>root_courses<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">&lt;?xml version="1.0" ?&gt;
&lt;courses&gt;
  &lt;csc&gt;
    &lt;!--Computer Science--&gt;
    &lt;course sec="225"&gt;
      &lt;title&gt;Computer Programming Concepts I&lt;/title&gt;
      &lt;credit_hrs&gt;3&lt;/credit_hrs&gt;
      &lt;prereq&gt;None&lt;/prereq&gt;
    &lt;/course&gt;
    &lt;course sec="275"&gt;
      &lt;title&gt;Computer Programming Concepts II&lt;/title&gt;
      &lt;credit_hrs&gt;3&lt;/credit_hrs&gt;
      &lt;prereq&gt;225&lt;/prereq&gt;
    &lt;/course&gt;
    &lt;course sec="385"&gt;
      &lt;title&gt;Data Structures and Algorithms&lt;/title&gt;
      &lt;credit_hrs&gt;4&lt;/credit_hrs&gt;
      &lt;prereq&gt;275&lt;/prereq&gt;
    &lt;/course&gt;
  &lt;/csc&gt;
  &lt;mat&gt;
    &lt;!--Mathematical Science--&gt;
    &lt;course sec="103"&gt;
      &lt;title&gt;Trigonometry&lt;/title&gt;
      &lt;credit_hrs&gt;2&lt;/credit_hrs&gt;
      &lt;prereq&gt;102&lt;/prereq&gt;
    &lt;/course&gt;
    &lt;course sec="115"&gt;
      &lt;title&gt;Calculus I&lt;/title&gt;
      &lt;credit_hrs&gt;4&lt;/credit_hrs&gt;
      &lt;prereq&gt;103&lt;/prereq&gt;
    &lt;/course&gt;
    &lt;course sec="116"&gt;
      &lt;title&gt;Calculus II&lt;/title&gt;
      &lt;credit_hrs&gt;4&lt;/credit_hrs&gt;
      &lt;prereq&gt;115&lt;/prereq&gt;
    &lt;/course&gt;
  &lt;/mat&gt;
&lt;/courses&gt;
</pre>
<p>Much better!  Now all that is left is to write to a file.  You should know this part so no code needs to be explained.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'courses.xml'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> xml_document<span class="token punctuation">:</span>
    xml_document<span class="token punctuation">.</span>write<span class="token punctuation">(</span>prettify<span class="token punctuation">(</span>root_courses<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><p>Just as a quick demonstration, I have converted the code to using a Course class.  Study it carefully because I separated out the logic of creating the course XML element and instead of using SubElement, I used Element.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> xml<span class="token punctuation">.</span>etree<span class="token punctuation">.</span>ElementTree <span class="token keyword">as</span> ET
<span class="token keyword">from</span> xml<span class="token punctuation">.</span>dom <span class="token keyword">import</span> minidom

<span class="token keyword">class</span> <span class="token class-name">Course</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> section<span class="token punctuation">,</span> title<span class="token punctuation">,</span> credit_hours<span class="token punctuation">,</span> prereq<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>section <span class="token operator">=</span> section
        self<span class="token punctuation">.</span>title <span class="token operator">=</span> title
        self<span class="token punctuation">.</span>credit_hours <span class="token operator">=</span> credit_hours
        self<span class="token punctuation">.</span>prereq <span class="token operator">=</span> prereq

<span class="token comment">#Function separate from the course class</span>
<span class="token comment">#Serializes a Course object to XML</span>
<span class="token keyword">def</span> <span class="token function">_xml_course_serialize</span><span class="token punctuation">(</span>course<span class="token punctuation">)</span><span class="token punctuation">:</span>
    course_elem <span class="token operator">=</span> ET<span class="token punctuation">.</span>Element<span class="token punctuation">(</span><span class="token string">'course'</span><span class="token punctuation">)</span>
    course_elem<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">'sec'</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>course<span class="token punctuation">.</span>section<span class="token punctuation">)</span><span class="token punctuation">)</span>
    
    title_sub <span class="token operator">=</span> ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>course_elem<span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">)</span>
    title_sub<span class="token punctuation">.</span>text <span class="token operator">=</span> course<span class="token punctuation">.</span>title

    credit_hrs_sub <span class="token operator">=</span> ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>course_elem<span class="token punctuation">,</span> <span class="token string">'credit_hours'</span><span class="token punctuation">)</span>
    credit_hrs_sub<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>course<span class="token punctuation">.</span>credit_hours<span class="token punctuation">)</span>

    prereq_sub <span class="token operator">=</span> ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>course_elem<span class="token punctuation">,</span> <span class="token string">'prereq'</span><span class="token punctuation">)</span>
    prereq_sub<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>course<span class="token punctuation">.</span>prereq<span class="token punctuation">)</span>

    <span class="token keyword">return</span> course_elem

root_courses <span class="token operator">=</span> ET<span class="token punctuation">.</span>Element<span class="token punctuation">(</span><span class="token string">"courses"</span><span class="token punctuation">)</span>

computer_science <span class="token operator">=</span> ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>root_courses<span class="token punctuation">,</span> <span class="token string">"csc"</span><span class="token punctuation">)</span>
mathematical_science <span class="token operator">=</span> ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>root_courses<span class="token punctuation">,</span> <span class="token string">"mat"</span><span class="token punctuation">)</span>

computer_science<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ET<span class="token punctuation">.</span>Comment<span class="token punctuation">(</span><span class="token string">"Computer Science"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
mathematical_science<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ET<span class="token punctuation">.</span>Comment<span class="token punctuation">(</span><span class="token string">"Mathematical Science"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

csc_courses <span class="token operator">=</span> <span class="token punctuation">[</span>
    Course<span class="token punctuation">(</span><span class="token number">225</span><span class="token punctuation">,</span> <span class="token string">'Computer Programming Concepts I'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    Course<span class="token punctuation">(</span><span class="token number">275</span><span class="token punctuation">,</span> <span class="token string">'Computer Programming Concepts II'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">225</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    Course<span class="token punctuation">(</span><span class="token number">385</span><span class="token punctuation">,</span> <span class="token string">'Data Structures and Algorithms'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">275</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>

mat_courses <span class="token operator">=</span> <span class="token punctuation">[</span>
    Course<span class="token punctuation">(</span><span class="token number">103</span><span class="token punctuation">,</span> <span class="token string">'Trigonometry'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">102</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Course<span class="token punctuation">(</span><span class="token number">115</span><span class="token punctuation">,</span> <span class="token string">'Calculus I'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">103</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Course<span class="token punctuation">(</span><span class="token number">116</span><span class="token punctuation">,</span> <span class="token string">'Calculus II'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

departments_info <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">(</span>computer_science<span class="token punctuation">,</span> csc_courses<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span>mathematical_science<span class="token punctuation">,</span> mat_courses<span class="token punctuation">)</span>
<span class="token punctuation">]</span>

<span class="token comment">#Creates the XML of the course and adds it to the appropriate</span>
<span class="token comment">#department element.</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>department<span class="token punctuation">,</span> courses<span class="token punctuation">)</span> <span class="token keyword">in</span> departments_info<span class="token punctuation">:</span>
    <span class="token keyword">for</span> course <span class="token keyword">in</span> courses<span class="token punctuation">:</span>
        course_xml <span class="token operator">=</span> _xml_course_serialize<span class="token punctuation">(</span>course<span class="token punctuation">)</span>
        department<span class="token punctuation">.</span>append<span class="token punctuation">(</span>course_xml<span class="token punctuation">)</span>

<span class="token comment">#Python Module of the Week</span>
<span class="token keyword">def</span> <span class="token function">prettify</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Return a pretty-printed XML string for the Element.
    """</span>
    rough_string <span class="token operator">=</span> ET<span class="token punctuation">.</span>tostring<span class="token punctuation">(</span>elem<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span>
    reparsed <span class="token operator">=</span> minidom<span class="token punctuation">.</span>parseString<span class="token punctuation">(</span>rough_string<span class="token punctuation">)</span>
    <span class="token keyword">return</span> reparsed<span class="token punctuation">.</span>toprettyxml<span class="token punctuation">(</span>indent<span class="token operator">=</span><span class="token string">"  "</span><span class="token punctuation">)</span>

<span class="token comment">#Save the pretty version to a .xml file</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'courses.xml'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> xml_document<span class="token punctuation">:</span>
    xml_document<span class="token punctuation">.</span>write<span class="token punctuation">(</span>prettify<span class="token punctuation">(</span>root_courses<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><h3 class="mume-header" id="xml-security">XML Security</h3>

<p>Okay, we didn't need to do this for CSV but we are starting to get into some data persistence techniques that have extended beyond just storing data.  The issue comes when the parser comes across malicious entities.  There is a list on the Python Documentation Site that lists the vulnerabilities each parser is vulnerable to and safe from.</p>
<p><a href="https://docs.python.org/3/library/xml.html#xml-vulnerabilities">Vulnerabilities</a></p>
<p>The golden rule is, don't trust data coming from an unknown source.  This includes client side data.  We are at the mercy of the XML parsers we use so unless you write your own that just does bare bones parsing.  This isn't the only data persistence model that contains vulnerabilities, however.  SQL and Pickling are also vulnerable (however, SQL has a nice safeguard to help prevent what is known as SQL Injection.  This safeguard can be circumvented under certain circumstances but we won't be looking too far into this.)</p>
<h2 class="mume-header" id="json-javascript-object-notation">JSON (JavaScript Object Notation)</h2>

<p><a href="https://www.json.org/">JSON Specifications</a></p>
<p><a href="https://docs.python.org/3/library/json.html">Python JSON Library</a></p>
<p><a href="https://pymotw.com/3/json/index.html">Python Module of the Week - JSON</a></p>
<p>JSON will be the most familiar even if you've never used or seen it before.  First, look at the following.</p>
<pre data-role="codeBlock" data-info="json" class="language-json"><span class="token punctuation">{</span>
 <span class="token property">"0"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"0 is the coldest possible temperature old the Kelvin scale."</span><span class="token punctuation">,</span>
  <span class="token property">"number"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">"found"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"trivia"</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token property">"1"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"1 is the number of moons orbiting Earth."</span><span class="token punctuation">,</span>
  <span class="token property">"number"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">"found"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"trivia"</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token property">"42"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"42 is the number of US gallons in a barrel of oil."</span><span class="token punctuation">,</span>
  <span class="token property">"number"</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  <span class="token property">"found"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"trivia"</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token property">"1337"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"1337 is the number that spells \"leet\" in leetspeak."</span><span class="token punctuation">,</span>
  <span class="token property">"number"</span><span class="token operator">:</span> <span class="token number">1337</span><span class="token punctuation">,</span>
  <span class="token property">"found"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"trivia"</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Data found using the <a href="http://numbersapi.com/#42">Numbers API</a>.</p>
<p>If you thought this was Python, you're close!  It's JSON!  Upon closer inspection, you'll notice why this isn't exactly Python.  The booleans are lowercase.  There is one more consideration but we'll deal with that later.  JSON is so close to Python, that Python already comes with a library to convert JSON data straight to Python objects.  The dictionaries will become dictionaries, strings to string, lists (not shown above but uses square brackets [] to represent lists in JSON) will be lists.  Not only is it easy to convert JSON to Python objects but it is also easy to convert Python objects to JSON for storage (with a few caveats).  JSON is commonly used on the web (hence the JavaScript as part of its acronym).</p>
<p>Enough with the gushing, let us see how to read and write JSON data.</p>
<h3 class="mume-header" id="reading-json">Reading JSON</h3>

<p>In order to read JSON data into Python objects we use the <code>json</code> library.  To read in a json file, we need to pass an opened file to the <code>load</code> function (not <code>loads</code>.  <code>loads</code> expects a string that contains JSON data like <code>data = '{"Brian":{"age":28,"cur_reading":"The Cuckoo\'s Egg"}}'</code>.  DO NOT CONFUSE THESE TWO!)  I'm using the data above from the Numbers API in a file called <strong>numbers.json</strong>.  Okay, let's see who this works.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> json

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'numbers.json'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> json_file<span class="token punctuation">:</span>
    data <span class="token operator">=</span> json<span class="token punctuation">.</span>load<span class="token punctuation">(</span>json_file<span class="token punctuation">)</span>
    <span class="token keyword">for</span> key <span class="token keyword">in</span> data<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"data[</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">repr</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">] -&gt; </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">repr</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</pre><pre class="language-text">data['0'] -&gt; {'text': '0 is the coldest possible temperature old the Kelvin scale.', 'number': 0, 'found': True, 'type': 'trivia'}
data['1'] -&gt; {'text': '1 is the number of moons orbiting Earth.', 'number': 1, 'found': True, 'type': 'trivia'}
data['42'] -&gt; {'text': '42 is the number of US gallons in a barrel of oil.', 'number': 42, 'found': True, 'type': 'trivia'}
data['1337'] -&gt; {'text': '1337 is the number that spells "leet" in leetspeak.', 'number': 1337, 'found': True, 'type': 'trivia'}
</pre>
<p>Not too painful!  The <code>json</code> library very nicely converts the data from the file to proper Python objects (even the boolean is capitalized).  This is pretty much it for reading in a JSON file.  Let's look at those caveats mentioned above.</p>
<h3 class="mume-header" id="writing-json">Writing JSON</h3>

<p>Writing to JSON files is as easy as calling <code>dump</code> and passing in a file object.  Make sure to use <code>dump</code> instead of <code>dumps</code>.  <code>dumps</code> will return a Python string object that contains JSON formatted data.  An example of <code>dumps</code> is below.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> json

data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">"Galaga"</span><span class="token punctuation">:</span><span class="token punctuation">{</span>
        <span class="token string">"highscore"</span><span class="token punctuation">:</span><span class="token number">2001</span><span class="token punctuation">,</span>
        <span class="token string">"player"</span><span class="token punctuation">:</span><span class="token string">"hal"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">"DigDug"</span><span class="token punctuation">:</span><span class="token punctuation">{</span>
        <span class="token string">"highscore"</span><span class="token punctuation">:</span><span class="token number">9000</span><span class="token punctuation">,</span>
        <span class="token string">"player"</span><span class="token punctuation">:</span><span class="token string">"btcr"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token builtin">type</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">'{"Galaga": {"highscore": 2001, "player": "hal"}, "DigDug": {"highscore": 9000, "player": "btcr"}}'





str
</pre>
<p>Notice, the returned objects by <code>dumps</code> is a Python String.</p>
<p>To actually write to a file, we can use <code>dump</code>.  <code>dump</code> accepts a Python object and a file object with the write privilege.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> json

data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">"Galaga"</span><span class="token punctuation">:</span><span class="token punctuation">{</span>
        <span class="token string">"highscore"</span><span class="token punctuation">:</span><span class="token number">2001</span><span class="token punctuation">,</span>
        <span class="token string">"player"</span><span class="token punctuation">:</span><span class="token string">"hal"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">"DigDug"</span><span class="token punctuation">:</span><span class="token punctuation">{</span>
        <span class="token string">"highscore"</span><span class="token punctuation">:</span><span class="token number">9000</span><span class="token punctuation">,</span>
        <span class="token string">"player"</span><span class="token punctuation">:</span><span class="token string">"btcr"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">#Write to a file</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'highscores.json'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> json_file<span class="token punctuation">:</span>
    json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>data<span class="token punctuation">,</span> json_file<span class="token punctuation">)</span>

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'highscores.json'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> json_file<span class="token punctuation">:</span>
    <span class="token keyword">for</span> line <span class="token keyword">in</span> json_file<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>
</pre><pre class="language-text">{"Galaga": {"highscore": 2001, "player": "hal"}, "DigDug": {"highscore": 9000, "player": "btcr"}}
</pre>
<p>Not bad!  We can even prettify the JSON like we did with XML, except, we don't need to write a separate function.  We can just pass an argument to <code>dump</code> called <code>indent</code>.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> json

data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">"Galaga"</span><span class="token punctuation">:</span><span class="token punctuation">{</span>
        <span class="token string">"highscore"</span><span class="token punctuation">:</span><span class="token number">2001</span><span class="token punctuation">,</span>
        <span class="token string">"player"</span><span class="token punctuation">:</span><span class="token string">"hal"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">"DigDug"</span><span class="token punctuation">:</span><span class="token punctuation">{</span>
        <span class="token string">"highscore"</span><span class="token punctuation">:</span><span class="token number">9000</span><span class="token punctuation">,</span>
        <span class="token string">"player"</span><span class="token punctuation">:</span><span class="token string">"btcr"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">#Write to a file</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'highscores.json'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> json_file<span class="token punctuation">:</span>
    json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>data<span class="token punctuation">,</span> json_file<span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'highscores.json'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> json_file<span class="token punctuation">:</span>
    <span class="token keyword">for</span> line <span class="token keyword">in</span> json_file<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">)</span>
</pre><pre class="language-text">{
  "Galaga": {
    "highscore": 2001,
    "player": "hal"
  },
  "DigDug": {
    "highscore": 9000,
    "player": "btcr"
  }
}
</pre>
<p>Much better!</p>
<p>Okay, now for the complicated bit.  What if we have a class with data we would like to save from the individual instances of the class?  Let's see what happens.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> json

<span class="token keyword">class</span> <span class="token class-name">Game</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> title<span class="token punctuation">,</span> highscore<span class="token punctuation">,</span> player<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>title <span class="token operator">=</span> title
        self<span class="token punctuation">.</span>highscore <span class="token operator">=</span> highscore
        self<span class="token punctuation">.</span>player <span class="token operator">=</span> player
        
galaga <span class="token operator">=</span> Game<span class="token punctuation">(</span><span class="token string">"Galaga"</span><span class="token punctuation">,</span> <span class="token number">2001</span><span class="token punctuation">,</span> <span class="token string">"Hal"</span><span class="token punctuation">)</span>
digdug <span class="token operator">=</span> Game<span class="token punctuation">(</span><span class="token string">"DigDug"</span><span class="token punctuation">,</span> <span class="token number">9000</span><span class="token punctuation">,</span> <span class="token string">"btcr"</span><span class="token punctuation">)</span>

data <span class="token operator">=</span> <span class="token punctuation">[</span>galaga<span class="token punctuation">,</span> digdug<span class="token punctuation">]</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token keyword">except</span> TypeError <span class="token keyword">as</span> te<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token punctuation">(</span>te<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">TypeError('Object of type Game is not JSON serializable')
</pre>
<p>We get a nasty error but it tells us what we are doing wrong. Specifically, the class <code>Game</code> is not JSON serializable (the <code>json</code> library has no idea how to convert objects of class Game to JSON).  We have to tell it how.  There are quite a few ways to do this.  We can write a function like the XML example that expects <code>Game</code> objects and returns an appropriate serializable Python oject.  We can also extend the <a href="https://docs.python.org/3/library/json.html#json.JSONEncoder">JSONEncoder</a> class and write our own and pass that to <code>dump</code> or <code>dumps</code> using the <code>cls</code> argument.</p>
<p>To do this, let us first create our JSONEncoder subclass.  All we need to do is override the <code>default</code> method which accepts a single argument <code>obj</code>.  Then we return a proper serializable to JSON Python object.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> json

<span class="token keyword">class</span> <span class="token class-name">Game</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> title<span class="token punctuation">,</span> highscore<span class="token punctuation">,</span> player<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>title <span class="token operator">=</span> title
        self<span class="token punctuation">.</span>highscore <span class="token operator">=</span> highscore
        self<span class="token punctuation">.</span>player <span class="token operator">=</span> player

<span class="token keyword">class</span> <span class="token class-name">GameJSONEncoder</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>JSONEncoder<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">default</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">:</span>
        d <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        d<span class="token punctuation">[</span><span class="token string">"title"</span><span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">.</span>title
        d<span class="token punctuation">[</span><span class="token string">"highscore"</span><span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">.</span>highscore
        d<span class="token punctuation">[</span><span class="token string">"player"</span><span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">.</span>player
        <span class="token keyword">return</span> d
</pre><p>Once we have our encoder class we can pass it to <code>cls</code>.</p>
<pre data-role="codeBlock" data-info="python" class="language-python">galaga <span class="token operator">=</span> Game<span class="token punctuation">(</span><span class="token string">"Galaga"</span><span class="token punctuation">,</span> <span class="token number">2001</span><span class="token punctuation">,</span> <span class="token string">"Hal"</span><span class="token punctuation">)</span>
digdug <span class="token operator">=</span> Game<span class="token punctuation">(</span><span class="token string">"DigDug"</span><span class="token punctuation">,</span> <span class="token number">9000</span><span class="token punctuation">,</span> <span class="token string">"btcr"</span><span class="token punctuation">)</span>

data <span class="token operator">=</span> <span class="token punctuation">[</span>galaga<span class="token punctuation">,</span> digdug<span class="token punctuation">]</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>data<span class="token punctuation">,</span> cls<span class="token operator">=</span>GameJSONEncoder<span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">[
  {
    "title": "Galaga",
    "highscore": 2001,
    "player": "Hal"
  },
  {
    "title": "DigDug",
    "highscore": 9000,
    "player": "btcr"
  }
]
</pre>
<p>This isn't quite the same output since I put the <code>Game</code> objects in a list.  There's many ways you could accomplish this so I'll leave that to you to experiment and see if you can't get the above program to have an outer dictionary in which the keys are the names of the games and the values are other dictionaries with the relavant information.</p>
<p>Just a heads up, the <code>cls</code> argument only accepts a single JSONEncoder class to handle our user classes so some creativity will be needed if you have multiple classes that need to be serialized.</p>
<p>That's it for the basics of writing to JSON and creating</p>
<h3 class="mume-header" id="json-caveats">JSON Caveats</h3>

<p>If you are manually creating a JSON document (which you should be capable of scripting so as not to have these problems) then you will need to watch for these little issues.</p>
<p>The first caveat we'll mention you've already seen.  JSON expects booleans to be lowercase.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> json

data <span class="token operator">=</span> <span class="token string">'{"boolean":True}'</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">#Should produce error (also, notice I'm using loads and not load)</span>
<span class="token keyword">except</span> json<span class="token punctuation">.</span>JSONDecodeError <span class="token keyword">as</span> jde<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token punctuation">(</span>jde<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">JSONDecodeError('Expecting value: line 1 column 12 (char 11)')
</pre>
<p>The error doesn't help much above.  It says in line 1 (there is only 1 line in the string) column 12 (the twelfth character starting with {) it fails at the value.  Here is a corrected version.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> json

data <span class="token operator">=</span> <span class="token string">'{"boolean":true}'</span>
json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</pre><pre class="language-text">{'boolean': True}
</pre>
<p>Better!</p>
<p>The second caveat is that strings in JSON must use double quotes.  There is no single quote string in JavaScript therefore there is not single quote string in JSON.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> json

data <span class="token operator">=</span> <span class="token string">"{\"string\":'other'}"</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">#Will throw error.</span>
<span class="token keyword">except</span> json<span class="token punctuation">.</span>JSONDecodeError <span class="token keyword">as</span> jde<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token punctuation">(</span>jde<span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><pre class="language-text">JSONDecodeError('Expecting value: line 1 column 11 (char 10)')
</pre>
<p>Same nasty error.  Doesn't tell us much about the problem.</p>
<p>Here is the corrected version.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> json

data <span class="token operator">=</span> <span class="token string">"{\"string\":\"other\"}"</span>
json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</pre><pre class="language-text">{'string': 'other'}
</pre>
<p>Now, I know what you are thinking, "The output clearly shows single quotes"...that's Python.  Those are Python strings.  Remember, <code>load</code> and <code>loads</code> returns a Python object.  The example shows that the data was properly parsed and no error occurred.</p>
<p>Next, Python tuples will be converted to JSON arrays (think of them as lists.  Just using the name that JSON uses)  This means when you reread data that was dumped Python data you will lose the tuple objects in the process.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> json

data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"animals"</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token string">"tiger"</span><span class="token punctuation">,</span> <span class="token string">"elephant"</span><span class="token punctuation">,</span> <span class="token string">"axolotl"</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
dumped <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Original Python Object:\t </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">repr</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Dumped JSON data:\t</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">repr</span><span class="token punctuation">(</span>dumped<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
redecoded <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>dumped<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Redecoded Python object: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">repr</span><span class="token punctuation">(</span>redecoded<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</pre><pre class="language-text">Original Python Object:	 {'animals': ('tiger', 'elephant', 'axolotl')}
Dumped JSON data:	'{"animals": ["tiger", "elephant", "axolotl"]}'
Redecoded Python object: {'animals': ['tiger', 'elephant', 'axolotl']}
</pre>
<p>Notice the tuple got converted to a list and stayed a list after redecoding the JSON to a Python object.</p>
<p>Finally, <code>None</code> becomes <code>null</code> and back to <code>None</code>.  So if you see <code>None</code> in your Python but <code>null</code> in your JSON then it's working just fine.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> json

data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"something"</span><span class="token punctuation">:</span><span class="token boolean">None</span><span class="token punctuation">}</span>
json_data <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
python_data <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>json_data<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Original Data:\t</span><span class="token interpolation"><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"JSON Data:\t</span><span class="token interpolation"><span class="token punctuation">{</span>json_data<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Python Data:\t</span><span class="token interpolation"><span class="token punctuation">{</span>python_data<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</pre><pre class="language-text">Original Data:	{'something': None}
JSON Data:	{"something": null}
Python Data:	{'something': None}
</pre>
<p>These are just small caveats that you should know but probably not worry about too much.</p>
<h2 class="mume-header" id="relational-databases-with-sqlite">Relational Databases with SQLite</h2>

<p><a href="https://pymotw.com/3/sqlite3/index.html">Python Module of the Week</a></p>
<p><a href="https://docs.python.org/3.7/library/sqlite3.html">SQLite3 Python Documentation</a></p>
<p><a href="https://www.sqlite.org/index.html">SQLite Documentation</a></p>
<p><a href="http://www.sqlitetutorial.net/sqlite-where/">SQLite Tutorial</a> - Only if you want more than what's offered here.</p>
<p>Before we get started, we need to learn a little SQL.  I am only going to be covering the very basics of CREATE, INSERT, UPDATE, SELECT, DELETE, and DROP.  This is enough to create what are called CRUD apps which stands for Create, Read, Update, and Delete.  Then we need to learn SQLite and how it stores the data.  SQLite, and any other database, requires knowledge of the data types the data will be.  Then finally, we'll get to working with the <code>sqlite3</code> library in Python.</p>
<p>If you are use to working on database servers like MSSQL, Oracle, MySQL, or various others then you may notice a large portion of the SQL commands are missing.  SQLite is a small, portable, database that isn't a service with users and passwords.  It is meant as a client side database.  Mobile apps, browsers such as Firefox, and simple applications use SQLite as a way to store information.  The actual db file is a type of binary file with some parts readable and is not considered secure.  If you want to use an encrypted sqlite DB there are solutions for that online.</p>
<h3 class="mume-header" id="sql-commands">SQL Commands</h3>

<p><a href="https://www.sqlite.org/lang.html">SQLite Commands</a></p>
<h4 class="mume-header" id="create-table">CREATE Table</h4>

<p><a href="https://www.sqlite.org/lang_createtable.html">SQLite Create Table</a></p>
<p>You'll notice there are other CREATE commands.  We will only be covering the CREATE TABLE command.  What is a table?  It's a series of columns and rows not unlike a CSV or Excel file.</p>
<p style="text-align: center;"><b>Table Name</b></p>
<table>
<thead>
<tr>
<th>0</th>
<th>column1</th>
<th>column2</th>
<th>column3</th>
</tr>
</thead>
<tbody>
<tr>
<td>row1</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>row2</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>row3</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>The relavant information needed are the names of the columns, the types the columns are, and the table name. Let's look at what an actual table might look like</p>
<p style="text-align: center;"><b>Customers</b></p>
<table>
<thead>
<tr>
<th>fname</th>
<th>lname</th>
<th>spent</th>
<th>last_on</th>
</tr>
</thead>
<tbody>
<tr>
<td>Brian</td>
<td>Rogers</td>
<td>5015</td>
<td>03/15/2019</td>
</tr>
<tr>
<td>Tom</td>
<td>Sidener</td>
<td>1020</td>
<td>11/09/2018</td>
</tr>
<tr>
<td>Lucinda</td>
<td>Caughey</td>
<td>10379</td>
<td>06/03/2019</td>
</tr>
</tbody>
</table>
<p>This is a customers table that stores the first name (fname), last name (lname), money spent (spent), and last log on (last_on) data.  Now that we have a table to work with we can use the CREATE TABLE command to make this table (we'll deal with inserting the data a bit later).  The last piece of information we need before beginning are the datatypes of the columns.  The datatypes must be correct for SQLite, not Python.</p>
<p><a href="https://www.sqlite.org/datatype3.html">SQLite Data Types</a></p>
<ul>
<li>The first two columns are easy, they are names so they will be strings or <code>text</code> types in SQLite.</li>
<li>The second column is also easy, it's a number and doesn't look like it contains a decimal so <code>integer</code>.</li>
<li>The last column is a bit trickier because it's a date and date and times are hard.  (Just watch the Computerphile video on time and timezones).  If you look at the page on SQLite datatypes there is a section on dates and times.  It says that SQLite has no date and time specific data type and gives us some advice for what to choose.  We'll stick with string so <code>text</code>.</li>
</ul>
<p>Okay, now to create the table</p>
<p><code>CREATE TABLE customers (fname text, lname text, spent integer, last_on text)</code></p>
<p>Pretty simple.  This will only create the database with columns but no data.</p>
<p>Just as an aside, the SQL commands are not case sensitive so this is just as valid</p>
<p><code>create table customers (fname text, lname text, spent integer, last_on text)</code></p>
<p>The only case sensitivity is the table and column names.</p>
<h4 class="mume-header" id="insert-data">INSERT Data</h4>

<p><a href="https://www.sqlite.org/lang_insert.html">INSERT Documentation for SQLite</a></p>
<p>Now that we have a table, we need to insert the data.  This is not difficult using the <code>INSERT INTO table_name VALUES ...</code> syntax.  Easy to just show you the command for each datapiece.</p>
<p><code>INSERT INTO customers VALUES ("Brian", "Rogers", 5015, "03/15/2019")</code></p>
<p>This will add the customer Brian with the appropriate spent and last on information.  This is one way.  This only works because I inserted the appropriated data in the same order as the columns.  fname first, lname second, spent third, and last_on last.  You must have the same number of values as there are columns.  What if you don't know this ordering?  Well, you can insert by specifying the column names in the order of data insert.</p>
<p><code>INSERT INTO customers (spent, last_on, lname, fname) VALUES (1020, "11/09/2019", "Sidener", "Tom")</code></p>
<p>That's pretty much it.  If a column allows it you can insert NULL into a column for a row.</p>
<p>Just to finish adding the last customer</p>
<p><code>INSERT INTO customers VALUES ("Lucinda", "Caughey", 10379, "06/03/2019")</code></p>
<h4 class="mume-header" id="update-data">UPDATE Data</h4>

<p><a href="https://www.sqlite.org/lang_update.html">UPDATE Documentation for SQLite</a></p>
<p>So, continuing to use the customers table, suppose we want to update a customer because they logged on and spent some money.  Let's update the information</p>
<p><code>UPDATE customers SET spent=2350,last_on="01/09/2019"</code></p>
<p>Those of you that are up to snuff on SQL will notice I made a major mistake.  While this will update the record, it will also update ALL records in the customers table to have that information.  Hope you keep backups (this was a real mistake made by a friend of mine while being an intern.  We lost a days worth of information.  Lesson learned!  Just to eaze your mind, we had backups, my friend wasn't fired, and we learned about views.)</p>
<p>How can we tell SQLite the exact record we want to update?  We have to include a WHERE clause.</p>
<p><a href="http://www.sqlitetutorial.net/sqlite-where/">WHERE Clause</a> - You might notice, this doesn't go to the SQLite documentation.  That's because I couldn't find a good explanation of the WHERE clause and the comparison operators.  So, I found this site which is also a good resource.</p>
<p>A WHERE clause allows us to filter out what we want by using logic and comparison operators.  So, let us update the only customer that needs to be updated, Tom.</p>
<p><code>UPDATE customers SET spent=2350,last_on="01/09/2019" WHERE fname="Tom"</code></p>
<p>You might think this is fine but what if we have multiple Tom's in our database?</p>
<p>Let's give a bit more information</p>
<p><code>UPDATE customers SET spent=2350,last_on="01/09/2019" WHERE fname="Tom" AND lname="Sidener"</code></p>
<p>Better! (Not best but for our purposes, it's good enough).</p>
<p>A more correct solution would have an id columne that is unique for each customer so you can just use the id.  We'll see some of that later.</p>
<h4 class="mume-header" id="select-data">SELECT Data</h4>

<p><a href="https://www.sqlite.org/lang_select.html">SELECT Documenation for SQLite</a></p>
<p>Now that we have data in our database, we can start retrieving it.  The <code>SELECT</code> command is powerful because we can be as specific as we want to be.  We can also use a wildcard, <code>*</code>, to mean 0 or more.  To start, you specify what columns you want to know about followed by FROM tablename.</p>
<p><code>SELECT fname,spent FROM customers</code></p>
<p>This will return the fname and spent column for every record in the table and nothing more in the order we list them in the SQL statement.  So the result will be</p>
<table>
<thead>
<tr>
<th>fname</th>
<th>spent</th>
</tr>
</thead>
<tbody>
<tr>
<td>Brian</td>
<td>5015</td>
</tr>
<tr>
<td>Tom</td>
<td>1020</td>
</tr>
<tr>
<td>Lucinda</td>
<td>10379</td>
</tr>
</tbody>
</table>
<p>If we want all the columns you can do this</p>
<p><code>SELECT fname,lname,spent,last_on FROM customers</code></p>
<p>This is the same as</p>
<p><code>SELECT * FROM customers</code></p>
<p>If you  want a specific record or records with a certain condition you can use the WHERE clause (shown in the UPDATE Data section)</p>
<p><code>SELECT spent FROM customers WHERE fname="Brian"</code></p>
<p><code>SELECT fname,lname FROM customers WHERE spent &gt;= 2000</code></p>
<p><code>SELECT fname,spent,last_on FROM customers WHERE spent &lt; 1500 AND lname != "Rogers"</code></p>
<p>The first select will only retrieve the spent column for any customer whose fname is Brian.<br>
The second select will retrieve the fname and lname of customers whose spent column is greater than or equal to 2000.<br>
The third select will retrieve fname, spent, and last_on of customers whose spent column is less than 1500 and whose lname is not equal to Rogers.</p>
<p>There's alot more we can do with SELECT but this should get you going quite nicely.</p>
<h4 class="mume-header" id="delete-data">DELETE Data</h4>

<p><a href="https://www.sqlite.org/lang_delete.html">DELETE Documentation for SQLite</a></p>
<p>Becareful because this is nonrecoverable!!</p>
<p>What if we want to delete data?  We can use the DELETE command.  So, let us delete a record.</p>
<p><code>DELETE FROM customers</code></p>
<p>Again, a huge mistake was made.  Unless you were planning on deleting EVERYTHING then we need to specify exactly what we want to delete.  How do we do that?  I think you know how.  With the use of a WHERE clause.</p>
<p><code>DELETE FROM customers WHERE fname="Brian" AND lname="ROGERS"</code></p>
<p>This will delete the record(s) whose columns fname and lname have Brian and Rogers respectively.</p>
<p>Keeping in mind this is a destructive operation, most companies don't completely delete a record right away.  They will instead mark it as inactive and to be deleted and will prune the record after so long.  Some don't even do the prune operation and you information will sit in a database even after you've "deleted" your account.  You may want to take this route for whatever you are working on.</p>
<h4 class="mume-header" id="drop-table">DROP Table</h4>

<p><a href="https://www.sqlite.org/lang_droptable.html">DROP Documentation for SQLite</a></p>
<p>This deletes a table.  There is no going back.  There is no WHERE clause.  This is destructive.  Only do this if you are absolutely sure this is what you want to do.</p>
<p><code>DROP TABLE customers</code></p>
<p>Bye, bye customers table.</p>
<h3 class="mume-header" id="python-sqlite3">Python SQLite3</h3>

<p>Now that you know the basics of SQL we can work with the SQLite3 library in Python.</p>
<p>There is one more thing we need to create and that's a database.  A database is a collection of tables.  SQLite is portable and so a database is just a regular file with some binary components.  SQLite3 can create the file when we use the connect function.  Then we can create the table and start adding and modifying data in it.  Let us look at how to create a database file first.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> sqlite3

DB_FILENAME <span class="token operator">=</span> <span class="token string">'store.db'</span>

conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>DB_FILENAME<span class="token punctuation">)</span>
</pre><p>Once we have our db file and a connection to it, we can start executing SQL Commands.  Let's start by creating the table above.  We can use the execute method of a connection to execute a single line of SQL.</p>
<pre data-role="codeBlock" data-info="python" class="language-python">conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
CREATE TABLE customers (fname text, lname text, spent integer, last_on text)
'''</span><span class="token punctuation">)</span>
</pre><pre class="language-text">&lt;sqlite3.Cursor at 0x4bafe20&gt;
</pre>
<p>The connection object returns a cursor object which can also be used to run commands.</p>
<p>If you were to look at the <strong>store.db</strong> file now, you'll see some text you can read and other text that is garbled.  This garbled text is binary data used by the SQLite engine.</p>
<p>Now that we have our database and table, we can insert those customers.</p>
<pre data-role="codeBlock" data-info="python" class="language-python">conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
INSERT INTO customers VALUES ("Brian", "Rogers", 5015, "03/15/2019")
'''</span><span class="token punctuation">)</span>

conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
INSERT INTO customers (spent, last_on, lname, fname) VALUES (1020, "11/09/2019", "Sidener", "Tom")
'''</span><span class="token punctuation">)</span>

conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
INSERT INTO customers VALUES ("Lucinda", "Caughey", 10379, "06/03/2019")
'''</span><span class="token punctuation">)</span>
</pre><pre class="language-text">&lt;sqlite3.Cursor at 0x4bc90e0&gt;
</pre>
<p>Now that we data inserted, let us see if we can get it back.  For this, we will need the cursor that is returned.  We can then use <code>fetchone()</code>, <code>fetchmany()</code>, or <code>fetchall()</code> to retrieve information.</p>
<pre data-role="codeBlock" data-info="python" class="language-python">curs <span class="token operator">=</span> conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
SELECT * FROM customers
'''</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> row <span class="token keyword">in</span> curs<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span>
</pre><pre class="language-text">('Brian', 'Rogers', 5015, '03/15/2019')
('Tom', 'Sidener', 1020, '11/09/2019')
('Lucinda', 'Caughey', 10379, '06/03/2019')
</pre>
<p>The above code uses <code>fetchall()</code> which returns a list of tuples containing the relavant information.  Let us update a record and see it's updated information.</p>
<pre data-role="codeBlock" data-info="python" class="language-python">conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
UPDATE customers SET spent=1237 WHERE fname="Tom"
'''</span><span class="token punctuation">)</span>

curs <span class="token operator">=</span> conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
SELECT * FROM customers
'''</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> row <span class="token keyword">in</span> curs<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span>
</pre><pre class="language-text">('Brian', 'Rogers', 5015, '03/15/2019')
('Tom', 'Sidener', 1237, '11/09/2019')
('Lucinda', 'Caughey', 10379, '06/03/2019')
</pre>
<p>You can see Tom's record got updated.  Let's delete a record now.</p>
<pre data-role="codeBlock" data-info="python" class="language-python">conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
DELETE FROM customers WHERE lname="Rogers"
'''</span><span class="token punctuation">)</span>

curs <span class="token operator">=</span> conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
SELECT * FROM customers
'''</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> row <span class="token keyword">in</span> curs<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span>
</pre><pre class="language-text">('Tom', 'Sidener', 1237, '11/09/2019')
('Lucinda', 'Caughey', 10379, '06/03/2019')
</pre>
<p>You can see, this operation deleted the customer Brian Rogers from the database.</p>
<p>After you are done working with a database, you should close the connection.</p>
<pre data-role="codeBlock" data-info="python" class="language-python">conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</pre><p>That's the basics of working with an SQLite database in Python.  There is quite a bit more you can do so if you use this library do give the Python documentation a nice read through.</p>
<h4 class="mume-header" id="a-quick-gotcha">A quick gotcha</h4>

<p>While writing the above I was able to immediately run inserts and updates and what not.  If you try to do this in a script file you might wonder why no data is being added or modified.  You should call <code>commit</code> after the execute statement.  Not running this will disallow anything from happening.  You can set an autocommit by setting an isolation_level upon connection or cursor object creation.</p>
<h3 class="mume-header" id="sql-security">SQL Security</h3>

<p>There is ONE tiny little thing you should worry about and that's the possibility of SQL injection.  If you are reading user input and using that input to pass through to an SQL database they will be able to perform an SQL injection attack.  This can be prevented if we use parameterized statements (also called prepared statements).  Let me just demonstrate real quick.</p>
<p>So you can follow along, go ahead and take the following code and paste into a script file and run it.  This will prepare the login.db file you are about to bypass.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> sqlite3
<span class="token keyword">import</span> os
<span class="token keyword">from</span> random <span class="token keyword">import</span> choice
<span class="token keyword">from</span> hashlib <span class="token keyword">import</span> sha256
<span class="token keyword">from</span> string <span class="token keyword">import</span> ascii_letters<span class="token punctuation">,</span> digits

DB_NAME <span class="token operator">=</span> <span class="token string">'login.db'</span>

<span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>DB_NAME<span class="token punctuation">)</span><span class="token punctuation">:</span>
    os<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>DB_NAME<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">gen_password</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    alphabet <span class="token operator">=</span> ascii_letters <span class="token operator">+</span> digits
    <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>choice<span class="token punctuation">(</span>alphabet<span class="token punctuation">)</span> <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>DB_NAME<span class="token punctuation">)</span>

conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">'''
CREATE TABLE users (username text, password text)
'''</span><span class="token punctuation">)</span>

password <span class="token operator">=</span> gen_password<span class="token punctuation">(</span><span class="token punctuation">)</span>

sha256_obj <span class="token operator">=</span> sha256<span class="token punctuation">(</span><span class="token punctuation">)</span>
sha256_obj<span class="token punctuation">.</span>update<span class="token punctuation">(</span>password<span class="token punctuation">)</span>
digest <span class="token operator">=</span> sha256_obj<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>

conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'INSERT INTO users VALUES ("admin", "</span><span class="token interpolation"><span class="token punctuation">{</span>digest<span class="token punctuation">}</span></span><span class="token string">")'</span></span><span class="token punctuation">)</span>
conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</pre><p>Now for your application script which logs users in.  There is only 1 user in this file but that won't matter.</p>
<p>Now for the vulnerable code that we will fix.  Copy this into another script file in the same directory as your db file and run it and do the following.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> sqlite3
<span class="token keyword">import</span> os
<span class="token keyword">from</span> sys <span class="token keyword">import</span> exit
<span class="token keyword">from</span> hashlib <span class="token keyword">import</span> sha256
<span class="token keyword">from</span> getpass <span class="token keyword">import</span> getpass

DB_NAME <span class="token operator">=</span> <span class="token string">'login.db'</span>

<span class="token keyword">def</span> <span class="token function">db_exists</span><span class="token punctuation">(</span>db_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>db_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>
    <span class="token keyword">return</span> <span class="token boolean">True</span>

<span class="token keyword">if</span> <span class="token keyword">not</span> db_exists<span class="token punctuation">(</span>DB_NAME<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Run this script where your login.db file was created"</span><span class="token punctuation">)</span>
    exit<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">validate_user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    username <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"Username: "</span><span class="token punctuation">)</span>
    password <span class="token operator">=</span> getpass<span class="token punctuation">(</span><span class="token string">"Password: "</span><span class="token punctuation">)</span>

    sha256_h <span class="token operator">=</span> sha256<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sha256_h<span class="token punctuation">.</span>update<span class="token punctuation">(</span>password<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    digest <span class="token operator">=</span> sha256_h<span class="token punctuation">.</span>digest<span class="token punctuation">(</span><span class="token punctuation">)</span>

    conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>DB_NAME<span class="token punctuation">)</span>
    curs <span class="token operator">=</span> conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'SELECT username FROM users WHERE username="</span><span class="token interpolation"><span class="token punctuation">{</span>username<span class="token punctuation">}</span></span><span class="token string">" AND password="</span><span class="token interpolation"><span class="token punctuation">{</span>digest<span class="token punctuation">}</span></span><span class="token string">"'</span></span><span class="token punctuation">)</span>

    user <span class="token operator">=</span> curs<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token keyword">not</span> user<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Invalid credentials"</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Welcome in </span><span class="token interpolation"><span class="token punctuation">{</span>user<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">!"</span></span><span class="token punctuation">)</span>

    conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

validate_user<span class="token punctuation">(</span><span class="token punctuation">)</span>
</pre><pre class="language-text">Username:  admin
Password:  ····


Invalid credentials
</pre>
<p>It shows that we get invalid credentials for admin.  Don't worry, we don't need to know the password.  Try the following</p>
<p><code>admin" --</code></p>
<p>Remember to have a space at the end.</p>
<pre data-role="codeBlock" data-info="python" class="language-python">validate_user<span class="token punctuation">(</span><span class="token punctuation">)</span>
</pre><pre class="language-text">Username:  admin" -- 
Password:  


Welcome in admin!
</pre>
<p>This is bad.  If this happens then chances are the hacker can run other commands as well.  We can fix this by using prepared statements.  Here is the fixed code.</p>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token keyword">import</span> sqlite3
<span class="token keyword">import</span> os
<span class="token keyword">from</span> sys <span class="token keyword">import</span> exit
<span class="token keyword">from</span> hashlib <span class="token keyword">import</span> sha256
<span class="token keyword">from</span> getpass <span class="token keyword">import</span> getpass

DB_NAME <span class="token operator">=</span> <span class="token string">'login.db'</span>

<span class="token keyword">def</span> <span class="token function">db_exists</span><span class="token punctuation">(</span>db_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>db_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>
    <span class="token keyword">return</span> <span class="token boolean">True</span>

<span class="token keyword">if</span> <span class="token keyword">not</span> db_exists<span class="token punctuation">(</span>DB_NAME<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Run this script where your login.db file was created"</span><span class="token punctuation">)</span>
    exit<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

username <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">"Username: "</span><span class="token punctuation">)</span>
password <span class="token operator">=</span> getpass<span class="token punctuation">(</span><span class="token string">"Password: "</span><span class="token punctuation">)</span>

sha256_h <span class="token operator">=</span> sha256<span class="token punctuation">(</span><span class="token punctuation">)</span>
sha256_h<span class="token punctuation">.</span>update<span class="token punctuation">(</span>password<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
digest <span class="token operator">=</span> sha256_h<span class="token punctuation">.</span>digest<span class="token punctuation">(</span><span class="token punctuation">)</span>

conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>DB_NAME<span class="token punctuation">)</span>

<span class="token comment"># --------- ONLY THIS LINE WAS MODIFIED ------------------</span>
curs <span class="token operator">=</span> conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'SELECT username FROM users WHERE username=? AND password=?'</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span>username<span class="token punctuation">,</span> digest<span class="token punctuation">)</span><span class="token punctuation">)</span>

user <span class="token operator">=</span> curs<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token keyword">not</span> user<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Invalid credentials"</span><span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Welcome in </span><span class="token interpolation"><span class="token punctuation">{</span>user<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">!"</span></span><span class="token punctuation">)</span>

conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</pre><pre class="language-text">Username:  admin" -- 
Password:  


Invalid credentials
</pre>
<p>Probably best to just always use parameterized statements!</p>
<hr>
<blockquote>
<p>University of Illinois at Springfield <br><br>
Instructor: Brian-Thomas Rogers <br><br>
Course: CSC 470</p>
</blockquote>
<pre data-role="codeBlock" data-info="python" class="language-python"></pre>
      </div>
      
      
    
    
    
    
    
    
    
    
  
    </body></html>